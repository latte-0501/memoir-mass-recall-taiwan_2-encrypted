<!DOCTYPE html>
<html lang="zh-TW" class="memoir-encryption">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîí Âè∞ÁÅ£Â§ßÁΩ∑ÂÖçÈÅãÂãïÂßãÊú´</title>
    <meta name="description" content="Âè∞ÁÅ£Â§ßÁΩ∑ÂÖçÈÅãÂãïÂßãÊú´ - Âä†ÂØÜ‰øùË≠∑ÁöÑÂÄã‰∫∫ÂõûÊÜ∂ÈåÑ">
    <meta name="author" content="MemoirFlow">
    <meta name="generator" content="MemoirFlow - Encrypted Edition">

    <!-- üö® Âä†ÂØÜÁõ∏ÈóúÂÖÉÊï∏Êìö -->
    <meta name="encryption-enabled" content="true">
    <meta name="backend-url" content="https://mastermaso.com/memoirflow">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="üîí Âè∞ÁÅ£Â§ßÁΩ∑ÂÖçÈÅãÂãïÂßãÊú´">
    <meta property="og:description" content="Âè∞ÁÅ£Â§ßÁΩ∑ÂÖçÈÅãÂãïÂßãÊú´ - Âä†ÂØÜ‰øùË≠∑ÁöÑÂÄã‰∫∫ÂõûÊÜ∂ÈåÑ">
    
    <!-- PWA ÊîØÊè¥ -->
    <meta name="theme-color" content="#1a1a2e">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <!-- ÂúñÊ®ô -->
    <link rel="icon" type="image/png" sizes="32x32" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üîí</text></svg>">
    
    <!-- Â§ñÈÉ®ÂáΩÂºèÂ∫´ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.1/umd/lucide.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        /* ===== Âü∫Êú¨Ê®£ÂºèÈáçÁΩÆ ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f172a 100%);
            color: white;
            overflow: hidden;
            height: 100vh;
            overscroll-behavior: none;
        }

        .container {
            position: relative;
            width: 100vw;
            height: 100vh;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f172a 100%);
            overflow: hidden;
        }

        .hidden {
            display: none !important;
        }

        /* ===== ËºâÂÖ•Áï´Èù¢ ===== */
        .loading-screen {
            position: fixed;
            inset: 0;
            background: linear-gradient(135deg, #1a1a2e, #16213e, #0f172a);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            transition: opacity 0.5s ease-out;
        }

        .loading-animation {
            width: 80px;
            height: 80px;
            border: 4px solid rgba(59, 130, 246, 0.2);
            border-top: 4px solid #3b82f6;
            border-radius: 50%;
            animation: spin 1.5s linear infinite;
            margin-bottom: 30px;
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.3);
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-title {
            color: white;
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 15px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
        }

        .loading-subtitle {
            color: #60a5fa;
            font-size: 16px;
            margin-bottom: 10px;
            text-align: center;
        }

        .loading-status {
            color: #9ca3af;
            font-size: 14px;
            text-align: center;
            font-style: italic;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.7; }
            50% { opacity: 1; }
        }

        /* ===== ÂØÜÁ¢ºËº∏ÂÖ•Ê®°ÊÖãÊ°Ü ===== */
        .password-modal {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.95);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            backdrop-filter: blur(4px);
        }

        .timeline-close:hover {
            background: rgba(239, 68, 68, 0.3);
            border-color: rgba(239, 68, 68, 0.5);
            transform: scale(1.05);
        }

        .timeline-list {
            display: flex;
            flex-direction: column;
            gap: 16px;
            position: relative;
        }

        .timeline-list::before {
            content: '';
            position: absolute;
            left: 20px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: linear-gradient(to bottom, #3b82f6, #8b5cf6, #3b82f6);
            border-radius: 1px;
        }

        .timeline-item {
            background: linear-gradient(135deg, rgba(31, 41, 55, 0.8) 0%, rgba(55, 65, 81, 0.6) 100%);
            border: 1px solid rgba(107, 114, 128, 0.3);
            border-radius: 16px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.4s ease;
            position: relative;
            margin-left: 50px;
            backdrop-filter: blur(4px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -42px;
            top: 50%;
            transform: translateY(-50%);
            width: 12px;
            height: 12px;
            background: #3b82f6;
            border: 3px solid rgba(17, 24, 39, 0.9);
            border-radius: 50%;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3);
            transition: all 0.3s;
        }

        .timeline-item:hover {
            background: linear-gradient(135deg, rgba(55, 65, 81, 0.9) 0%, rgba(75, 85, 99, 0.7) 100%);
            border-color: rgba(59, 130, 246, 0.5);
            transform: translateX(8px);
            box-shadow: 0 8px 24px rgba(0,0,0,0.3);
        }

        .timeline-item:hover::before {
            background: #60a5fa;
            transform: translateY(-50%) scale(1.2);
            box-shadow: 0 0 0 4px rgba(96, 165, 250, 0.4);
        }

        .timeline-item.active {
            border-color: #3b82f6;
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.2) 0%, rgba(147, 51, 234, 0.1) 100%);
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.4);
            transform: translateX(12px);
        }

        .timeline-item.active::before {
            background: #fbbf24;
            box-shadow: 0 0 0 4px rgba(251, 191, 36, 0.4);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { 
                box-shadow: 0 0 0 4px rgba(251, 191, 36, 0.4);
            }
            50% { 
                box-shadow: 0 0 0 8px rgba(251, 191, 36, 0.2);
            }
        }

        .timeline-item-date {
            color: #60a5fa;
            font-size: 12px;
            margin-bottom: 6px;
            font-weight: 500;
            text-shadow: 0 1px 2px rgba(0,0,0,0.3);
        }

        .timeline-item-title {
            color: white;
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 8px;
            text-shadow: 0 1px 2px rgba(0,0,0,0.3);
        }

        .timeline-item-description {
            color: rgb(209, 213, 219);
            font-size: 13px;
            line-height: 1.5;
            opacity: 0.9;
        }

        /* ===== ‰ΩøÁî®Ë™™ÊòéÈù¢Êùø ===== */
        .help-panel {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.7);
            z-index: 60;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .help-content {
            background: rgba(17, 24, 39, 0.95);
            border: 1px solid rgba(107, 114, 128, 0.3);
            border-radius: 16px;
            padding: 24px;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            backdrop-filter: blur(12px);
            box-shadow: 0 8px 32px rgba(0,0,0,0.5);
        }

        .help-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .help-title {
            color: white;
            font-size: 18px;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .help-close {
            width: 32px;
            height: 32px;
            background: rgba(55, 65, 81, 0.8);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .help-close:hover {
            background: rgba(75, 85, 99, 0.8);
        }

        .help-section {
            margin-bottom: 20px;
        }

        .help-section h3 {
            color: rgb(96, 165, 250);
            font-size: 16px;
            margin-bottom: 8px;
        }

        .help-section p {
            color: rgb(209, 213, 219);
            font-size: 14px;
            line-height: 1.5;
            margin-bottom: 8px;
        }

        .help-shortcuts {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 8px;
        }

        .help-shortcut {
            display: flex;
            align-items: center;
            gap: 8px;
            color: rgb(209, 213, 219);
            font-size: 12px;
        }

        .help-key {
            background: rgba(55, 65, 81, 0.8);
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 10px;
            color: white;
        }

        /* ===== ÈüøÊáâÂºèË®≠Ë®à ===== */
        @media (max-width: 768px) {
            .header-content {
                padding: 8px 12px;
                min-height: 56px;
            }
            
            .control-btn {
                width: 28px;
                height: 28px;
            }

            .title-area {
                display: none;
            }

            .mobile-title {
                display: block;
            }

            .subtitle-area {
                margin: 0 8px 8px 8px;
                padding: 10px 12px;
            }

            .event-title {
                font-size: 13px;
            }

            .event-date {
                font-size: 11px;
            }

            .event-description {
                font-size: 11px;
            }

            .media-carousel {
                flex-direction: column;
            }

            .thumbnail-list {
                width: 100%;
                height: 100px;
            }

            .thumbnail-container {
                width: 100%;
                height: 100%;
                padding: 8px;
            }

            .thumbnail-scroll {
                flex-direction: row;
                overflow-x: auto;
                overflow-y: hidden;
                justify-content: flex-start;
            }

            .thumbnail-scroll.many-items {
                justify-content: flex-start;
                padding-top: 0;
                padding-left: 20px;
            }

            .thumbnail {
                width: 60px;
                height: 60px;
                flex-shrink: 0;
            }

            .grid-container {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
                gap: 12px;
            }

            .timeline-content {
                padding: 20px;
                max-width: 95vw;
                min-width: 320px;
            }

            .timeline-item {
                margin-left: 30px;
                padding: 16px;
            }

            .timeline-item::before {
                left: -22px;
                width: 8px;
                height: 8px;
            }

            .timeline-list::before {
                left: 12px;
            }

            .media-nav-btn {
                width: 40px;
                height: 40px;
            }

            .media-nav-btn.prev {
                left: 8px;
            }

            .media-nav-btn.next {
                right: 8px;
            }

            .viewer-content {
                padding: 16px !important;
                width: 100vw !important;
                height: 100vh !important;
                box-sizing: border-box !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
            }
            
            .viewer-content img{
                max-width: 100%;
                max-height: 100vh;
            }

            .viewer-media {
                max-width: calc(100vw - 32px) !important;
                max-height: calc(100vh - 80px) !important;
                width: auto !important;
                height: auto !important;
                object-fit: contain !important;
                display: block !important;
                margin: auto !important;
            }
            
            .viewer-close {
                top: 16px !important;
                right: 16px !important;
                width: 40px !important;
                height: 40px !important;
                z-index: 70 !important;
                position: fixed !important;
            }
            
            .media-viewer img {
                max-width: calc(100vw - 32px) !important;
                max-height: calc(100vh - 80px) !important;
                width: auto !important;
                height: auto !important;
                object-fit: contain !important;
            }
            
            .media-viewer video {
                max-width: calc(100vw - 32px) !important;
                max-height: calc(100vh - 80px) !important;
                width: auto !important;
                height: auto !important;
                object-fit: contain !important;
            }
        }

        /* ===== ÂãïÁï´ÊïàÊûú ===== */
        .fade-in {
            animation: fadeIn 0.5s ease-out forwards;
        }

        .fade-out {
            animation: fadeOut 0.5s ease-out forwards;
        }

        @keyframes fadeIn {
            from { 
                opacity: 0; 
                transform: translateY(20px) scale(0.95); 
            }
            to { 
                opacity: 1; 
                transform: translateY(0) scale(1); 
            }
        }

        @keyframes fadeOut {
            from { 
                opacity: 1; 
                transform: translateY(0) scale(1); 
            }
            to { 
                opacity: 0; 
                transform: translateY(-20px) scale(0.95); 
            }
        }

        .content-transition {
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .content-transition.fade-out {
            opacity: 0;
            transform: scale(0.98) translateY(10px);
        }

        .content-transition.fade-in {
            opacity: 1;
            transform: scale(1) translateY(0);
        }

        .typewriter-cursor {
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }

        /* ===== ÁÑ°ÈöúÁ§ôÊîØÊè¥ ===== */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        .password-modal-content {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            padding: 50px;
            border-radius: 24px;
            text-align: center;
            max-width: 450px;
            width: 90%;
            border: 2px solid rgba(59, 130, 246, 0.3);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.8);
        }

        .modal-icon {
            font-size: 64px;
            margin-bottom: 25px;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .modal-title {
            color: white;
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .modal-description {
            color: #9ca3af;
            font-size: 16px;
            margin-bottom: 30px;
            line-height: 1.5;
        }

        .password-input {
            width: 100%;
            padding: 16px 20px;
            font-size: 18px;
            border: 2px solid rgba(107, 114, 128, 0.3);
            border-radius: 12px;
            background: rgba(31, 41, 55, 0.8);
            color: white;
            text-align: center;
            letter-spacing: 2px;
            transition: all 0.3s ease;
            margin-bottom: 25px;
        }

        .password-input:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.2);
        }

        .modal-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        .modal-btn {
            padding: 14px 28px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 120px;
        }

        .unlock-btn {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
        }

        .unlock-btn:hover:not(:disabled) {
            transform: translateY(-2px);
        }

        .cancel-btn {
            background: rgba(107, 114, 128, 0.8);
            color: white;
        }

        .cancel-btn:hover {
            background: rgba(75, 85, 99, 0.8);
        }

        .error-message {
            color: #ef4444;
            font-size: 14px;
            margin-top: 15px;
            padding: 10px;
            background: rgba(239, 68, 68, 0.1);
            border-radius: 8px;
            border: 1px solid rgba(239, 68, 68, 0.3);
        }

        /* ===== È†ÇÈÉ®ÊéßÂà∂Âàó ===== */
        .header {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            z-index: 40;
            background: linear-gradient(to bottom, rgba(0,0,0,0.95) 0%, rgba(0,0,0,0.9) 70%, transparent 100%);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(107, 114, 128, 0.3);
        }

        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 16px;
            gap: 8px;
            min-height: 60px;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 12px;
            flex-shrink: 0;
        }

        .control-btn {
            width: 32px;
            height: 32px;
            background: rgba(31, 41, 55, 0.8);
            border: 1px solid rgba(107, 114, 128, 0.5);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
            backdrop-filter: blur(4px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }

        .control-btn:hover {
            background: rgba(55, 65, 81, 0.8);
            transform: scale(1.05);
        }

        .title-area {
            flex: 1;
            display: flex;
            justify-content: center;
            min-width: 0;
            max-width: 300px;
        }

        .mobile-title {
            display: none;
            color: white;
            font-size: 14px;
            font-weight: bold;
            text-align: center;
            flex: 1;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .title-box {
            background: linear-gradient(to right, rgba(31, 41, 55, 0.8), rgba(55, 65, 81, 0.8));
            backdrop-filter: blur(4px);
            border-radius: 20px;
            padding: 8px 16px;
            border: 1px solid rgba(107, 114, 128, 0.3);
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            text-align: center;
            position: relative;
        }

        .title-box::before {
            content: 'üîí';
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 12px;
        }

        .title-text {
            color: white;
            font-size: 14px;
            font-weight: bold;
            padding-left: 20px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 8px;
            flex-shrink: 0;
        }

        .nav-btn {
            width: 28px;
            height: 28px;
            background: rgba(55, 65, 81, 0.8);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
            border: 1px solid rgba(107, 114, 128, 0.3);
        }

        .nav-btn:hover:not(.disabled) {
            background: rgba(75, 85, 99, 0.8);
        }

        .nav-btn.disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .event-counter {
            color: white;
            font-size: 12px;
            white-space: nowrap;
            padding: 4px 12px;
            text-align: center;
            min-width: 50px;
        }

        .media-counter {
            color: rgb(156, 163, 175);
            font-size: 12px;
            white-space: nowrap;
            background: rgba(31, 41, 55, 0.6);
            padding: 4px 12px;
            border-radius: 20px;
            border: 1px solid rgba(107, 114, 128, 0.3);
        }

        /* ===== Â≠óÂπïÂçÄÂüü ===== */
        .subtitle-area {
            padding: 12px 16px;
            background: linear-gradient(to right, rgba(31, 41, 55, 0.6), rgba(55, 65, 81, 0.6));
            backdrop-filter: blur(4px);
            border-radius: 12px;
            margin: 0 16px 12px 16px;
            border: 1px solid rgba(107, 114, 128, 0.2);
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
            touch-action: pan-x;
            cursor: grab;
        }

        .subtitle-area:active {
            cursor: grabbing;
        }

        .subtitle-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 12px;
            margin-bottom: 8px;
        }

        .event-date {
            color: rgb(209, 213, 219);
            font-size: 12px;
            flex-shrink: 0;
        }

        .event-title {
            color: white;
            font-size: 14px;
            font-weight: bold;
            flex: 1;
            min-width: 0;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .subtitle-toggle {
            display: flex;
            align-items: center;
            gap: 8px;
            flex-shrink: 0;
        }

        .toggle-switch {
            width: 40px;
            height: 20px;
            background: #6b7280;
            border-radius: 10px;
            position: relative;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .toggle-switch.active {
            background: #3b82f6;
        }

        .toggle-knob {
            width: 16px;
            height: 16px;
            background: white;
            border-radius: 50%;
            position: absolute;
            top: 2px;
            left: 2px;
            transition: transform 0.3s;
        }

        .toggle-switch.active .toggle-knob {
            transform: translateX(20px);
        }

        .event-description {
            color: rgb(229, 231, 235);
            font-size: 12px;
            line-height: 1.5;
        }

        /* ===== ‰∏ªË¶ÅÂÖßÂÆπÂçÄÂüü ===== */
        .main-content {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            padding-top: 120px;
            transition: all 0.5s ease;
            touch-action: pan-x;
        }

        .main-content.transitioning {
            opacity: 0.7;
            transform: scale(0.98);
        }

        .main-content.grid-mode {
            padding-top: 80px;
        }

        .media-area {
            flex: 1;
            position: relative;
            padding: 8px 12px;
            min-height: 0;
            touch-action: pan-x;
        }

        /* ===== Â™íÈ´îËº™Êí≠Ê®°Âºè ===== */
        .media-carousel {
            width: 100%;
            height: 100%;
            display: flex;
            gap: 16px;
        }

        .main-media {
            flex: 1;
            position: relative;
            background: linear-gradient(135deg, #1f2937, #000000);
            border-radius: 12px;
            overflow: hidden;
            border: 1px solid rgba(107, 114, 128, 0.3);
            box-shadow: 0 8px 16px rgba(0,0,0,0.5);
            transition: all 0.5s ease;
        }

        .main-media.transitioning {
            opacity: 0.5;
            transform: scale(0.95);
        }

        .media-display {
            position: absolute;
            inset: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .media-display img,
        .media-display video {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            cursor: pointer;
            transition: opacity 0.3s;
        }

        .media-nav-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 48px;
            height: 48px;
            background: rgba(31, 41, 55, 0.9);
            border: 1px solid rgba(107, 114, 128, 0.5);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
            backdrop-filter: blur(4px);
            z-index: 20;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }

        .media-nav-btn:hover:not(.disabled) {
            background: rgba(55, 65, 81, 0.9);
        }

        .media-nav-btn.disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .media-nav-btn.prev {
            left: 16px;
        }

        .media-nav-btn.next {
            right: 16px;
        }

        .media-counter-display {
            position: absolute;
            top: 16px;
            right: 16px;
            background: rgba(17, 24, 39, 0.9);
            border: 1px solid rgba(107, 114, 128, 0.5);
            color: white;
            font-size: 12px;
            padding: 8px 12px;
            border-radius: 20px;
            backdrop-filter: blur(4px);
            z-index: 20;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }

        /* ===== Á∏ÆÂúñÂàóË°® ===== */
        .thumbnail-list {
            width: 120px;
            position: relative;
            display: flex;
            align-items: center;
        }

        .thumbnail-container {
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, rgba(31, 41, 55, 0.8) 0%, rgba(55, 65, 81, 0.6) 50%, rgba(31, 41, 55, 0.8) 100%);
            border-radius: 12px;
            border: 1px solid rgba(107, 114, 128, 0.2);
            padding: 12px;
            position: relative;
            overflow: hidden;
        }

        .thumbnail-scroll {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 12px;
            height: 100%;
            overflow-y: auto;
            scrollbar-width: none;
            -ms-overflow-style: none;
            justify-content: center;
            min-height: 100%;
        }

        .thumbnail-scroll::-webkit-scrollbar {
            display: none;
        }

        .thumbnail-scroll.many-items {
            justify-content: flex-start;
            padding-top: 20px;
        }

        .thumbnail {
            width: 80px;
            height: 80px;
            border-radius: 8px;
            overflow: hidden;
            cursor: pointer;
            border: 2px solid rgba(107, 114, 128, 0.5);
            transition: all 0.3s;
            position: relative;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
            flex-shrink: 0;
        }

        .thumbnail:hover {
            border-color: rgba(107, 114, 128, 0.7);
            transform: scale(1.05);
        }

        .thumbnail.active {
            border-color: #3b82f6;
            transform: scale(1.1);
            box-shadow: 0 0 8px rgba(59, 130, 246, 0.5);
        }

        .thumbnail img,
        .thumbnail video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .thumbnail-index {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.8) 0%, transparent 100%);
            color: white;
            font-size: 10px;
            text-align: center;
            padding: 2px;
        }

        /* ===== Á∂≤Ê†ºÊ®°Âºè ===== */
        .media-grid {
            width: 100%;
            height: 100%;
            padding: 16px;
            background: linear-gradient(135deg, #1f2937 0%, #000000 50%, #1f2937 100%);
            transition: all 0.3s;
        }

        .grid-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 16px;
            height: 100%;
            overflow-y: auto;
        }

        .grid-item {
            aspect-ratio: 1;
            border-radius: 12px;
            overflow: hidden;
            cursor: pointer;
            border: 2px solid rgba(107, 114, 128, 0.5);
            transition: all 0.3s;
            position: relative;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }

        .grid-item:hover {
            border-color: rgba(107, 114, 128, 0.7);
            transform: scale(1.02);
        }

        .grid-item.active {
            border-color: #3b82f6;
            transform: scale(1.05);
            box-shadow: 0 0 12px rgba(59, 130, 246, 0.5);
        }

        .grid-item img,
        .grid-item video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .grid-item-info {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(17, 24, 39, 0.9) 0%, rgba(55, 65, 81, 0.7) 70%, transparent 100%);
            padding: 8px;
            border-top: 1px solid rgba(107, 114, 128, 0.3);
        }

        .grid-item-name {
            color: white;
            font-size: 10px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        /* ===== ÂÖ®Ëû¢ÂπïÊü•ÁúãÂô® ===== */
        .media-viewer {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.95);
            z-index: 50;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .viewer-close {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 60;
            width: 48px;
            height: 48px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            cursor: pointer;
            transition: background-color 0.3s;
            backdrop-filter: blur(4px);
        }

        .viewer-close:hover {
            background: rgba(0, 0, 0, 0.7);
        }

        .viewer-content {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 32px;
            box-sizing: border-box;
        }

        .viewer-content img{
            width: 100%;
            object-fit: contain;
        }

        .viewer-media {
            max-width: 100%;
            max-height: 100%;
            width: auto;
            height: auto;
            object-fit: contain;
        }

        /* ===== Ë®≠ÂÆöÈÅ∏ÂñÆ ===== */
        .settings-menu {
            position: absolute;
            top: 48px;
            left: 0;
            background: rgba(17, 24, 39, 0.95);
            border: 1px solid rgba(107, 114, 128, 0.3);
            border-radius: 12px;
            padding: 16px;
            backdrop-filter: blur(12px);
            min-width: 200px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.5);
            z-index: 50;
        }

        .menu-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 12px;
            color: white;
            font-size: 12px;
        }

        .menu-item:last-child {
            margin-bottom: 0;
        }

        .menu-button {
            width: 100%;
            background: #22c55e;
            border: none;
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 12px;
            cursor: pointer;
            transition: background-color 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }

        .menu-button:hover {
            background: #16a34a;
        }

        .menu-button.skip {
            background: #f97316;
        }

        .menu-button.skip:hover {
            background: #ea580c;
        }

        /* ===== ÊôÇÈñìËª∏Â∞éËà™Èù¢Êùø ===== */
        .timeline-panel {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.8);
            z-index: 60;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            backdrop-filter: blur(8px);
        }

        .timeline-content {
            background: linear-gradient(135deg, rgba(17, 24, 39, 0.95) 0%, rgba(31, 41, 55, 0.9) 100%);
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 20px;
            padding: 32px;
            min-width: 600px;
            max-width: 900px;
            max-height: 85vh;
            overflow-y: auto;
            backdrop-filter: blur(20px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.6), 0 0 0 1px rgba(255,255,255,0.1);
            position: relative;
        }

        .timeline-content::before {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: 20px;
            padding: 1px;
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.5), rgba(147, 51, 234, 0.3), rgba(59, 130, 246, 0.5));
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask-composite: exclude;
            pointer-events: none;
        }

        .timeline-header {
            display: flex;
            align-items: center;
            justify-content: flex-start;
            padding-right: 60px;
            margin-bottom: 24px;
            position: relative;
            z-index: 10;
        }

        .timeline-title {
            color: white;
            font-size: 24px;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 12px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .timeline-close {
            position: absolute;
            top: 16px;
            right: 16px;
            z-index: 100;
            width: 40px;
            height: 40px;
            background: rgba(239, 68, 68, 0.2);
            border: 1px solid rgba(239, 68, 68, 0.3);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #f87171;
            cursor: pointer;
            transition: all 0.3s;
            backdrop-filter: blur(4px);
        }
        
    </style>
</head>
<body>
    <!-- ËºâÂÖ•Áï´Èù¢ -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-animation"></div>
        <div class="loading-title">üîí Âè∞ÁÅ£Â§ßÁΩ∑ÂÖçÈÅãÂãïÂßãÊú´</div>
        <div class="loading-subtitle">Ê≠£Âú®ËºâÂÖ•‰∏≠...</div>
        <div class="loading-status" id="loadingStatus">Ê≠£Âú®ÂàùÂßãÂåñÂÆâÂÖ®ÈÄ£Êé•</div>
    </div>

    <!-- ÂØÜÁ¢ºËº∏ÂÖ•Ê®°ÊÖãÊ°Ü -->
    <div class="password-modal hidden" id="passwordModal">
        <div class="password-modal-content">
            <div class="modal-icon">üîí</div>
            <h2 class="modal-title">Ê≠§ÂõûÊÜ∂ÈåÑÂèóÂØÜÁ¢º‰øùË≠∑</h2>
            <p class="modal-description">Ë´ãËº∏ÂÖ•Ê≠£Á¢∫ÁöÑÂØÜÁ¢º‰ª•Êü•ÁúãÂä†ÂØÜÂÖßÂÆπ</p>
            <input type="password" id="memoirPassword" class="password-input" placeholder="Ë´ãËº∏ÂÖ•ÂØÜÁ¢º">
            <div class="modal-buttons">
                <button class="modal-btn unlock-btn" id="unlockBtn">üîì Ëß£Èéñ</button>
                <button class="modal-btn cancel-btn" id="cancelBtn">‚ùå ÂèñÊ∂à</button>
            </div>
            <div id="passwordError" class="error-message hidden"></div>
        </div>
    </div>

    <!-- ‰∏ªÊáâÁî®Á®ãÂºè -->
    <div class="container hidden" id="app">
        <!-- Ê®ôÈ°åÂàó -->
        <div class="header">
            <div class="header-content">
                <!-- Â∑¶ÂÅ¥ÊéßÂà∂ÊåâÈàï -->
                <div class="header-left">
                    <div class="control-btn" id="settingsBtn" title="Ë®≠ÂÆöÈÅ∏ÂñÆ">
                        <i data-lucide="settings" style="width: 14px; height: 14px;"></i>
                    </div>
                    <div class="control-btn" id="timelineBtn" title="ÊôÇÈñìËª∏Â∞éËà™" style="background: rgba(59, 130, 246, 0.8);">
                        <i data-lucide="calendar" style="width: 14px; height: 14px;"></i>
                    </div>
                </div>
                
                <!-- Ê°åÈù¢ÁâàÊ®ôÈ°å -->
                <div class="title-area">
                    <div class="title-box">
                        <div class="title-text">Âè∞ÁÅ£Â§ßÁΩ∑ÂÖçÈÅãÂãïÂßãÊú´</div>
                    </div>
                </div>

                <!-- ÊâãÊ©üÁâàÊ®ôÈ°å -->
                <div class="mobile-title">üîí Âè∞ÁÅ£Â§ßÁΩ∑ÂÖçÈÅãÂãïÂßãÊú´</div>
                
                <!-- Âè≥ÂÅ¥Â∞éËà™ -->
                <div class="header-right">
                    <div class="nav-btn" id="prevEventBtn" title="‰∏ä‰∏ÄÂÄãÊôÇÈñìÁØÄÈªû">
                        <i data-lucide="chevron-left" style="width: 12px; height: 12px;"></i>
                    </div>
                    <div class="event-counter">
                        <span id="currentEventNum">1</span>/<span id="totalEvents">1</span>
                    </div>
                    <div class="nav-btn" id="nextEventBtn" title="‰∏ã‰∏ÄÂÄãÊôÇÈñìÁØÄÈªû">
                        <i data-lucide="chevron-right" style="width: 12px; height: 12px;"></i>
                    </div>
                    <div class="media-counter">
                        <span id="mediaCount">0</span>Â™íÈ´î
                    </div>
                </div>
            </div>

            <!-- Â≠óÂπïÂçÄÂüü -->
            <div class="subtitle-area content-transition" id="subtitleArea">
                <div class="subtitle-header">
                    <div class="event-date" id="eventDate">2024Âπ¥1Êúà1Êó•</div>
                    <div class="event-title" id="eventTitle">Ê®ôÈ°å</div>
                    <div class="subtitle-toggle">
                        <span style="color: white; font-size: 12px;">Â≠óÂπï</span>
                        <div class="toggle-switch active" id="subtitleToggle">
                            <div class="toggle-knob"></div>
                        </div>
                    </div>
                </div>
                <div class="event-description" id="eventDescription">ÊèèËø∞ÂÖßÂÆπ...</div>
            </div>
        </div>

        <!-- ‰∏ªË¶ÅÂÖßÂÆπÂçÄÂüü -->
        <div class="main-content content-transition" id="mainContent">
            <div class="media-area">
                <!-- Ëº™Êí≠Ê®°Âºè -->
                <div class="media-carousel" id="mediaCarousel">
                    <div class="main-media content-transition" id="mainMedia">
                        <div class="media-display" id="mediaDisplay">
                            <!-- Â™íÈ´îÂÖßÂÆπÂ∞áÂú®ÈÄôË£°ÂãïÊÖãÊèíÂÖ• -->
                        </div>
                        
                        <!-- Â∞éËà™ÊåâÈàï -->
                        <div class="media-nav-btn prev" id="prevMediaBtn">
                            <i data-lucide="chevron-left" style="width: 20px; height: 20px;"></i>
                        </div>
                        <div class="media-nav-btn next" id="nextMediaBtn">
                            <i data-lucide="chevron-right" style="width: 20px; height: 20px;"></i>
                        </div>
                        
                        <!-- Â™íÈ´îË®àÊï∏Âô® -->
                        <div class="media-counter-display" id="mediaCounterDisplay">
                            1 / 1
                        </div>
                    </div>
                    
                    <!-- Á∏ÆÂúñÂàóË°® -->
                    <div class="thumbnail-list">
                        <div class="thumbnail-container">
                            <div class="thumbnail-scroll" id="thumbnailScroll">
                                <!-- Á∏ÆÂúñÂ∞áÂú®ÈÄôË£°ÂãïÊÖãÊèíÂÖ• -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Á∂≤Ê†ºÊ®°Âºè -->
                <div class="media-grid hidden" id="mediaGrid">
                    <div class="grid-container" id="gridContainer">
                        <!-- Á∂≤Ê†ºÈ†ÖÁõÆÂ∞áÂú®ÈÄôË£°ÂãïÊÖãÊèíÂÖ• -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Ë®≠ÂÆöÈÅ∏ÂñÆ -->
        <div class="settings-menu hidden" id="settingsMenu">
            <div class="menu-item">
                <span>Á∂≤Ê†ºÊ™¢Ë¶ñ</span>
                <div class="toggle-switch" id="gridToggle">
                    <div class="toggle-knob"></div>
                </div>
            </div>
            
            <button class="menu-button" id="helpBtn">
                <i data-lucide="help-circle" style="width: 14px; height: 14px;"></i>
                ‰ΩøÁî®Ë™™Êòé
            </button>
            
            <button class="menu-button skip hidden" id="skipTypingBtn">
                <i data-lucide="skip-forward" style="width: 14px; height: 14px;"></i>
                Ë∑≥ÈÅéÊâìÂ≠óÊïàÊûú
            </button>
        </div>

        <!-- ÊôÇÈñìËª∏Â∞éËà™Èù¢Êùø -->
        <div class="timeline-panel hidden" id="timelinePanel">
            <div class="timeline-close" id="timelineClose">
                <i data-lucide="x" style="width: 18px; height: 18px;"></i>
            </div>
            <div class="timeline-content fade-in">
                <div class="timeline-header">
                    <div class="timeline-title">
                        <i data-lucide="calendar" style="width: 24px; height: 24px;"></i>
                        ÊôÇÈñìËª∏Â∞éËà™
                    </div>
                </div>
                <div class="timeline-list" id="timelineList">
                    <!-- ÊôÇÈñìËª∏È†ÖÁõÆÂ∞áÂú®ÈÄôË£°ÂãïÊÖãÊèíÂÖ• -->
                </div>
            </div>
        </div>

        <!-- ‰ΩøÁî®Ë™™ÊòéÈù¢Êùø -->
        <div class="help-panel hidden" id="helpPanel">
            <div class="help-content">
                <div class="help-header">
                    <div class="help-title">
                        <i data-lucide="help-circle" style="width: 20px; height: 20px;"></i>
                        ‰ΩøÁî®Ë™™Êòé
                    </div>
                    <div class="help-close" id="helpClose">
                        <i data-lucide="x" style="width: 16px; height: 16px;"></i>
                    </div>
                </div>
                
                <div class="help-section">
                    <h3>üéÆ Âü∫Êú¨Êìç‰Ωú</h3>
                    <div class="help-shortcuts">
                        <div class="help-shortcut">
                            <span class="help-key">‚Üê/‚Üí</span>
                            <span>ÂàáÊèõÊôÇÈñìÁØÄÈªû</span>
                        </div>
                        <div class="help-shortcut">
                            <span class="help-key">ÊªëÂãï</span>
                            <span>Âú®ÊñáÂ≠óÂçÄÂüüÂ∑¶Âè≥ÊªëÂãïÂàáÊèõÊó•Êúü</span>
                        </div>
                        <div class="help-shortcut">
                            <span class="help-key">ÈªûÊìä</span>
                            <span>ÈªûÊìäÂ™íÈ´îÂèØÂÖ®Ëû¢ÂπïÊü•Áúã</span>
                        </div>
                    </div>
                </div>

                <div class="help-section">
                    <h3>üëÅÔ∏è Ê™¢Ë¶ñÊ®°Âºè</h3>
                    <p><strong>Ëº™Êí≠Ê®°Âºè</strong> - ÈÄê‰∏ÄÁÄèË¶ΩÂ™íÈ´îÔºåÈÅ©ÂêàÂ∞àÊ≥®Ê¨£Ë≥û</p>
                    <p><strong>Á∂≤Ê†ºÊ®°Âºè</strong> - ‰∏ÄË¶ΩÊâÄÊúâÂ™íÈ´îÔºåÈÅ©ÂêàÂø´ÈÄüÁÄèË¶Ω</p>
                    <p><strong>ÂÖ®Ëû¢ÂπïÊ®°Âºè</strong> - Â∞àÊ≥®ÂñÆ‰∏ÄÂ™íÈ´îÔºåÊúÄ‰Ω≥ËßÄÁúãÈ´îÈ©ó</p>
                </div>

                <div class="help-section">
                    <h3>‚å®Ô∏è Âø´Êç∑Èçµ</h3>
                    <div class="help-shortcuts">
                        <div class="help-shortcut">
                            <span class="help-key">G</span>
                            <span>ÂàáÊèõÁ∂≤Ê†ºÊ®°Âºè</span>
                        </div>
                        <div class="help-shortcut">
                            <span class="help-key">ESC</span>
                            <span>ÈóúÈñâÂÖ®Ëû¢Âπï/Èù¢Êùø</span>
                        </div>
                    </div>
                </div>

                <div class="help-section">
                    <h3>üì± ÊâãÊ©üÁâàÂäüËÉΩ</h3>
                    <p>Âú®ÊñáÂ≠óÂÖßÂÆπÂçÄÂüüÊàñÂ™íÈ´îÂçÄÂüü<strong>Â∑¶Âè≥ÊªëÂãï</strong>ÂèØÂø´ÈÄüÂàáÊèõ‰∏çÂêåÊó•ÊúüÁöÑÂõûÊÜ∂„ÄÇÊªëÂãïÊôÇÊúÉÈ°ØÁ§∫Ë¶ñË¶∫ÂõûÈ•ãÊåáÁ§∫ÊñπÂêë„ÄÇ</p>
                </div>
            </div>
        </div>
    </div>

    <!-- ÂÖ®Ëû¢ÂπïÂ™íÈ´îÊü•ÁúãÂô® -->
    <div class="media-viewer hidden" id="mediaViewer">
        <div class="viewer-close" id="viewerClose">
            <i data-lucide="x" style="width: 20px; height: 20px;"></i>
        </div>
        <div class="viewer-content" id="viewerContent">
            <!-- ÂÖ®Ëû¢ÂπïÂ™íÈ´îÂÖßÂÆπÂ∞áÂú®ÈÄôË£°È°ØÁ§∫ -->
        </div>
    </div>

    <!-- üö® ÈóúÈçµÔºöËß£ÂØÜËÖ≥Êú¨Ê≥®ÂÖ•Èªû -->
    
            <script>
            (function() {
                'use strict';
                
                console.log('üîê MemoirFlow Ëß£ÂØÜÁ≥ªÁµ±ËºâÂÖ•‰∏≠...');
                console.log('üîç Ëß£ÂØÜÊ®°Âºè: auto_fallback');
                
                if (window.MemoirFlowDecryptionSystem) {
                    console.warn('‚ö†Ô∏è Ëß£ÂØÜÁ≥ªÁµ±Â∑≤ÂàùÂßãÂåñ');
                    return;
                }
                
                window.MemoirFlowDecryptionSystem = true;
                window.MemoirFlowGlobals = window.MemoirFlowGlobals || {
                    MEMOIR_DATA: null,
                    decryptionAttempts: 0,
                    MAX_ATTEMPTS: 3,
                    isInitialized: false,
                    decryptionMode: 'auto_fallback' // üö® ÊèêÊó©Ë®≠ÂÆöËß£ÂØÜÊ®°Âºè
                };
                
                const globals = window.MemoirFlowGlobals;
                console.log('‚úÖ Ëß£ÂØÜÊ®°ÂºèÂ∑≤Ë®≠ÂÆöÁÇ∫:', globals.decryptionMode);
                
                // üö® Ê®°ÂºèÁâπÂÆöÁöÑËß£ÂØÜÈÇèËºØ
                
            // üîÑ ÂõûÈÄÄÊ®°ÂºèËß£ÂØÜÈÇèËºØ - Ëá™ÂãïËß£ÂØÜÔºåÁÑ°ÈúÄÂØÜÁ¢º
            console.log('üîÑ Ë®≠ÂÆöËß£ÂØÜÊ®°ÂºèÁÇ∫ auto_fallback');
            globals.decryptionMode = 'auto_fallback';
            
            const fallbackData = 'eyJjaGluZXNlTmFtZSI6IuWPsOeBo+Wkp+e9t+WFjemBi+WLleWni+acqyIsImNyZWF0ZWRBdCI6IjIwMjUtMDgtMDRUMDc6MDc6MjYuODA2MTk2MzAwKzAwOjAwIiwiZW5nbGlzaE5hbWUiOiJtYXNzLXJlY2FsbC10YWl3YW5fMiIsImV2ZW50cyI6W3siZGF0ZSI6IjIwMjQtMDItMDYiLCJkZXNjcmlwdGlvbiI6IueVtuaZguWPsOeBo+e4vee1seWkp+mBuOOAgeeri+WnlOmBuOiIieWhteWfg+iQveWumu+8jOWwjeaWvOWPsOeBo+awkeecvuiqjeeCuuOAjOmBuOiIiee1kOaenOaYr+S6kuebuOWItuihoe+8jOWItuihoeaJjeaYr+awkeS4u+OAje+8jOiigee0heWGsDLmnIjmmYLooajnpLrvvJrjgIzlnKjlnIvmsJHpu6jplbfmnJ/nmoTmtJfohablkozliIbljJbnk6bop6PkuYvkuIvvvIzlj7DngaPnorrlr6bmmK/mnInkuIDnqK7lkozlubPkuLvnvqnnmoTlubvmg7PjgILigKbigKbmiYDorILnmoTntbHkuIDlj7DngaPvvIzkuZ/lsLHmmK/lvoHmnI3oh6rnlLHlj7DngaPvvIzmmK/nv5Lov5HlubPlr6vpgLLkuK3lhbHmmrTmlL/nmoTmhrLms5XjgIHlr6vpgLLkuK3lhbHpu6jnq6DnmoTkuIDlgIvln7rmnKzlnIvnrZbjgILkuK3lhbHlr6bpmpvkuIrntablj7DngaPlsLHlhanlgIvpgbjmk4fvvJrkuqTlh7rkvaDnmoTkurrmsJHkuLvmrIrvvIzkuqTlh7rmsbrlrproh6rlt7Hlkb3pgYvlkozliY3pgJTnmoTmrIrliKnvvIzmjqXlj5fkuK3lhbHmmrTmlL/lvLfliqDntabkvaDpppnmuK/ljJbnmoTliY3mma/vvIzpgqPpurzlsLHlj6/ku6XlvpfliLDlsYjovrHnmoTmiYDorILjgI7lkozlubPjgI/jgILjgI0iLCJpZCI6IjE3NTQyOTEzODk1MDQiLCJtZWRpYSI6W3siZmlsZW5hbWUiOiIxNzU0MjkxMzk3X2NhMTFhMjI4LWRhYzEtNDAzYi1hMzc1LTkwZGVmYjE5YmJjZi53ZWJwIiwiaWQiOiJjYTExYTIyOC1kYWMxLTQwM2ItYTM3NS05MGRlZmIxOWJiY2YiLCJpc1VybCI6ZmFsc2UsIm9yaWdpbmFsTmFtZSI6IjE3NTIyMDAxNDY4NTkwMF9QMjk3NjI5MzEud2VicCIsInBhdGgiOiJtZWRpYS8yMGVhNmNiNC02MzNiLTRlZDgtOWY0YS01ZDM3ZjFkZTZmNGJfODk4OGZmMjEtNmY4ZC00MTFhLWJmYzMtNTBiYzU2YTZlMGQ5LndlYnAiLCJ0eXBlIjoiaW1hZ2UiLCJ1cmwiOm51bGx9XSwib3JkZXIiOjAsInRpdGxlIjoi6KKB57SF5Yaw77ya5Lit5YWx5ruy6YCP5Y+w54Gj56uL5rOV6ZmiIn0seyJkYXRlIjoiMjAyNC0wNC0wMyIsImRlc2NyaXB0aW9uIjoiMjAyNOW5tOiKseiTruWcsOmch++8iOWPiOeoseeCujQwM+iKseadseWkp+WcsOmch++8ieeZvOeUn+aWvOeVtuWcsOaZgumWkzTmnIgz5pel5LiK5Y2IN+aZgjU45YiGMDnnp5LvvIzpnIflpK7kvY3mlrzlj7DngaPoirHok67nuKPlo73osZDphInvvIzoiq7msI/opo/mqKE3LjHvvIzpnIfmupDmt7HluqbngroxOS435YWs6YeM77yM5Lim5Zyo6Iqx6JOu57ij56eA5p6X6YSJ5ZKM5bmz5p2R6KeA5ris5Yiw5Lit5aSu5rCj6LGh572y5Zyw6ZyH5YiG57Sa5Lit5pyA5aSn6ZyH5bqmNuW8t+eahOWcsOmch+WSjOm6peWNoeWIqemch+W6puWIhue0muS4reeahDjvvIhWSUlJ77yJ5bqm77yM5oyB57qM5pCW5pmD5YWx5aSn57SEOTjnp5LvvIzmnJ/plpPoh7rngaPlhajls7bpg73mhJ/lj5fliLDmmI7poa/mkJbmmYPjgIIiLCJpZCI6IjE3NTQyOTE0ODIzMjEiLCJtZWRpYSI6W3siZmlsZW5hbWUiOiJ1cmxfMTc1NDI5MTUwNDM3OSIsImlkIjoiMTc1NDI5MTUwNDM3OSIsImlzVXJsIjp0cnVlLCJvcmlnaW5hbE5hbWUiOiI1MzY0Mzg1ODE5Nl9mYWU4MTY3ZGQwX2IuanBnIiwicGF0aCI6Imh0dHBzOi8vbGl2ZS5zdGF0aWNmbGlja3IuY29tLzY1NTM1LzUzNjQzODU4MTk2X2ZhZTgxNjdkZDBfYi5qcGciLCJ0eXBlIjoiaW1hZ2UiLCJ1cmwiOiJodHRwczovL2xpdmUuc3RhdGljZmxpY2tyLmNvbS82NTUzNS81MzY0Mzg1ODE5Nl9mYWU4MTY3ZGQwX2IuanBnIn1dLCJvcmRlciI6MSwidGl0bGUiOiLoirHok67nmbznlJ/opo/mqKE3LjHlvLfpnIcifSx7ImRhdGUiOiIyMDI0LTA0LTI3IiwiZGVzY3JpcHRpb24iOiLlgoXltJDokIHnvZTpoafoirHok67ngb3mg4XvvIznjoflnJjoqKrllY/njovmu6zlr6fvvIzlhbHljYHkuIPkvY3nq4vlp5TvvIzkvZTkuoblnIvmsJHpu6jkupTljYHkuozluK3nq4vlp5Tov5HkuInliIbkuYvkuIDjgILpmaTlgoXltJDokIHvvIzljYDln5/nq4vlp5TljIXlkKvpm5nljJfnjovptLvolofjgIHnvoXmmI7miY3jgIHlvLXmmbrlgKvjgIHlu5blhYjnv5TvvIzln7rpmobluILmnpfmspvnpaXvvIznq7noi5flnLDljYDlvpDmrKPnkanjgIHphK3mraPpiJDjgIHpgrHpjq7ou43vvIzljZfmipXnuKPmuLjpoaXjgIHph5HploDnuKPpmbPnjonnj43jgIHpgKPmsZ/nuKPpmbPpm6rnlJ/vvIzljp/kvY/msJHnq4vlp5TmnInpu4Pku4HjgIHphK3lpKnosqHjgIHnm6fnuKPkuIDvvJvkuI3liIbljYDliYfmnInnv4Hmm4nnjrLjgIHmnpflgKnntrrjgILlkIzooYznmoTpgoTmnInliY3lnIvmsJHpu6jnq4vlp5TlvLXogrLnvo7jgIIiLCJpZCI6IjE3NTQyOTE2MjQ1NTgiLCJtZWRpYSI6W3siZmlsZW5hbWUiOiIxNzU0MjkxNjc1XzQ3ZDVjNGE0LWZmNWEtNDI1Yy1iOTcyLTBjNzMyOTI2YmJiYS5qcGciLCJpZCI6IjQ3ZDVjNGE0LWZmNWEtNDI1Yy1iOTcyLTBjNzMyOTI2YmJiYSIsImlzVXJsIjpmYWxzZSwib3JpZ2luYWxOYW1lIjoiNTIzOTM1OTg4XzE3ODg3NDk5ODQ3MzE2Njc0XzUxMTk2NTc5NDAxNTk2NzgxNDNfbi5qcGciLCJwYXRoIjoibWVkaWEvMjBlYTZjYjQtNjMzYi00ZWQ4LTlmNGEtNWQzN2YxZGU2ZjRiX2IzZWIxMjEwLWUyNGItNGFhZi05Y2VkLWU4NmRmN2Q4Y2E1Yy5qcGciLCJ0eXBlIjoiaW1hZ2UiLCJ1cmwiOm51bGx9XSwib3JkZXIiOjIsInRpdGxlIjoi5YKF5bSQ6JCB546H5ZyL5rCR56uL6Zmi6buo5ZyY77yM5ouc6KaL57Wx5oiw6aCt55uuIn0seyJkYXRlIjoiMjAyNC0wNS0yOCIsImRlc2NyaXB0aW9uIjoi56uL5rOV6Zmi6IG35qyK6KGM5L2/5rOV562J5rOV5qGI77yM5LiL5Y2I5Zub6bue5aSa5LiJ6K6A6YCa6YGO44CC6IiJ5omL6KGo5rG66YGO56iL5Lit77yM6JeN55m95YWp6buo5oy+6JGX5Lq65pW45YSq5Yui77yM6K6T5rOV5qGI6ZeW6Zec44CC5rCR6YCy6buo56uL5aeU5om56KmV6Jmf56ix5ZyL5pyD5pS56Z2p55qE5rOV5qGI77yM5Y275piv6buR566x44CB56iL5bqP5LiN5q2j576p77yM5rKS5pS25rCR5Li744CB54Sh6ZmQ5pO05qyK44CCIiwiaWQiOiIxNzU0MjkxNzM2NzAzIiwibWVkaWEiOlt7ImZpbGVuYW1lIjoidXJsXzE3NTQyOTE3Mzk2MjEiLCJpZCI6IjE3NTQyOTE3Mzk2MjEiLCJpc1VybCI6dHJ1ZSwib3JpZ2luYWxOYW1lIjoiMTIwMHg4MDBfd21reV8wNDk5MTI3MDExMzFfMjAyNDA1MjgwMTM1MDAwMDAwLmpwZyIsInBhdGgiOiJodHRwczovL2ltZ2Nkbi5jbmEuY29tLnR3L3d3dy9XZWJQaG90b3MvMTAyNC8yMDI0MDUyOC8xMjAweDgwMF93bWt5XzA0OTkxMjcwMTEzMV8yMDI0MDUyODAxMzUwMDAwMDAuanBnIiwidHlwZSI6ImltYWdlIiwidXJsIjoiaHR0cHM6Ly9pbWdjZG4uY25hLmNvbS50dy93d3cvV2ViUGhvdG9zLzEwMjQvMjAyNDA1MjgvMTIwMHg4MDBfd21reV8wNDk5MTI3MDExMzFfMjAyNDA1MjgwMTM1MDAwMDAwLmpwZyJ9XSwib3JkZXIiOjMsInRpdGxlIjoi5oy+5bit5qyh5YSq5YuiLCDol43nmb3oga/miYvmmrTlipvpgJrpgY7lnIvmnIPmk7TmrIrms5XmoYgifSx7ImRhdGUiOiIyMDI0LTExLTE0IiwiZGVzY3JpcHRpb24iOiLlj7DngaPntpPmv5/msJHkuLvpgKPlkIjoiIflj7DngaPlhazmsJHpmaPnt5oxMOaciDMw5pel5Zyo56uL5rOV6Zmi576k6LOi5qiT6ZaA5Y+j5Y+s6ZaL6KiY6ICF5pyD77yM6LOq55aR6Zmz546J54+N562J5Lq65omA5o+Q6Zui5bO25bu66Kit5qKd5L6L5L+u5q2j6I2J5qGI77yM6KaB6Kit572u6Zui5bO25ZyL6Zqb6Yar55mC54m55Y2A55qE56ysMTPmop3kuYsx5Y+K5LmLMuS/ruato+iNieahiO+8jOWPiuioree9rumbouWztuiHqueUseiyv+aYk+ekuuevhOWNgOeahOesrDE45qKd5LmLMeS/ruato+iNieahiO+8jOaBkOiuk+mHkemmrOmbouWztua3queCuuS4reWci+S4gOWci+WFqeWItuippumpl+WNgO+8jOacieWus+Wci+WutuWuieWFqOOAgiIsImlkIjoiMTc1NDI5MjAyMTA1NyIsIm1lZGlhIjpbeyJmaWxlbmFtZSI6InVybF8xNzU0MjkyMDIzNTU1IiwiaWQiOiIxNzU0MjkyMDIzNTU1IiwiaXNVcmwiOnRydWUsIm9yaWdpbmFsTmFtZSI6IncxMjAwIiwicGF0aCI6Imh0dHBzOi8vdG9kYXktb2JzLmxpbmUtc2Nkbi5uZXQvMGhKQTVzcHVzQUZXNElDZ1E4dDR0cU9UQmNHUjg3YkE5bkttVmJEeThEVEZzbkpsSXdNajVHRFM5WUdVSjJhUUJ2S0RzS0RuNExIMVoxUHdVX05nL3cxMjAwIiwidHlwZSI6ImltYWdlIiwidXJsIjoiaHR0cHM6Ly90b2RheS1vYnMubGluZS1zY2RuLm5ldC8waEpBNXNwdXNBRlc0SUNnUTh0NHRxT1RCY0dSODdiQTluS21WYkR5OERURnNuSmxJd01qNUdEUzlZR1VKMmFRQnZLRHNLRG40TEgxWjFQd1VfTmcvdzEyMDAifV0sIm9yZGVyIjo0LCJ0aXRsZSI6IumZs+eOieePjeaPkOWHuumbouWztuW7uuioreaineS+iyJ9LHsiZGF0ZSI6IjIwMjQtMTItMjAiLCJkZXNjcmlwdGlvbiI6IuS4reiPr+awkeWci+eri+azlemZouacgzIw5pel5Zyo5Lit5ZyL5ZyL5rCR6buo77yI6JeN77yJ44CB5rCR55y+6buo77yI55m977yJ56uL5aeU6IGv5omL5LiL77yM5by36KGM5LiJ6K6A6YCa6YGO44CK5YWs6IG35Lq65ZOh6YG46IiJ57235YWN5rOV44CL44CK5oay5rOV6Ki06Kif5rOV44CL44CK6LKh5pS/5pS25pSv5YqD5YiG5rOV44CL77yM5byV55m854it6K2w44CCXG5cbueCuuWPjeWwjeiXjeeZvemAmumBjuS4ieWkp+eIreitsOazleahiO+8jOWPsOeBo+WkmuWAi+WFrOawkeWcmOmrlDIw5pel6IiJ6KGM44CM5Yas5a2j6Z2S6bOl57O75YiX77ya5Zue5b6p5ZyL5pyD5rCR5Li777yM6YCA5Zue5LiJ5aSn5oOh5rOV44CN5rS75YuV77yM6Jmf5Y+s6Z2S6bOl5YWs5rCR6YGL5YuV576k55y+5Zyo56uL5rOV6Zmi5aSW6ZuG57WQ77yM5Li76L6m5pa55Zyo5pma6ZaTOeaZguW3puWPs+Wuo+W4g+ePvuWgtOaciTLokKzppJjkurrvvIzmtLvli5XlnKjlh4zmmagxMuaZgue1kOadn+OAglxuXG7kuK3oj6/msJHlnIvnuL3ntbHos7TmuIXlvrcyMOaXpeaZmumWk+aWvOiHieabuOeZvOaWh+iqqu+8jOeri+azlemZouaYr+Wci+WutuacgOmrmOawkeaEj+apn+mXnO+8jOixoeW+teWPsOeBo+eahOiHqueUseawkeS4u+OAguS9hjIw5pel5by36KGM6YCa6YGO55qEM+mgheazleahiO+8jOacque2k+WFheWIhuiojuirluOAgeeEoeimluawkeaEj++8jOS4jeWDheWJneWlquS6uuawkeebo+edo+eahOasiuWIqe+8jOabtOaYr+S+teWus+WPuOazleeNqOeri++8jOeUmuiHs+ihneaTiuaUuOmXnOavj+S9jeWci+awkeOAgeWci+WutuaVtOmrlOizh+a6kOWIhumFjeeahOWFrOW5s+ato+e+qeOAgumAmeaYr+aykuaUtuawkeS4u+Wci+WutuasiuWKm+WIhueri+eahOWOn+WJh++8jOabtOaYr+aClumbouawkeS4u+Wci+WutuS6uuawkeS9nOS4u+eahOecn+irpuOAgiIsImlkIjoiMTc1NDI5MjEzMzkyNCIsIm1lZGlhIjpbeyJmaWxlbmFtZSI6InVybF8xNzU0MjkyMTM2MDg0IiwiaWQiOiIxNzU0MjkyMTM2MDg0IiwiaXNVcmwiOnRydWUsIm9yaWdpbmFsTmFtZSI6IjIwMjQxMjIwLTAwMS5qcGciLCJwYXRoIjoiaHR0cHM6Ly90aGVpbml0aXVtLmNvbS93cC1jb250ZW50L3VwbG9hZHMvMjAyNC8xMi8yMDI0MTIyMC0wMDEuanBnIiwidHlwZSI6ImltYWdlIiwidXJsIjoiaHR0cHM6Ly90aGVpbml0aXVtLmNvbS93cC1jb250ZW50L3VwbG9hZHMvMjAyNC8xMi8yMDI0MTIyMC0wMDEuanBnIn0seyJmaWxlbmFtZSI6InVybF8xNzU0MjkyMzg4Nzg4IiwiaWQiOiIxNzU0MjkyMzg4Nzg4IiwiaXNVcmwiOnRydWUsIm9yaWdpbmFsTmFtZSI6ImlkMTQzOTUxOTYtMjQxMjIwMjExNjM5MTAwMzExLTYwMHg0MDAuanBnIiwicGF0aCI6Imh0dHBzOi8vaS5lcG9jaHRpbWVzLmNvbS9hc3NldHMvdXBsb2Fkcy8yMDI0LzEyL2lkMTQzOTUxOTYtMjQxMjIwMjExNjM5MTAwMzExLTYwMHg0MDAuanBnIiwidHlwZSI6ImltYWdlIiwidXJsIjoiaHR0cHM6Ly9pLmVwb2NodGltZXMuY29tL2Fzc2V0cy91cGxvYWRzLzIwMjQvMTIvaWQxNDM5NTE5Ni0yNDEyMjAyMTE2MzkxMDAzMTEtNjAweDQwMC5qcGcifV0sIm9yZGVyIjo1LCJ0aXRsZSI6IuiXjeeZveWFqem7qOW8t+ihjOmAmumBjuaGsuazleiotOion+azlS/pgbjnvbfms5Uv6LKh5YqD5rOVIn0seyJkYXRlIjoiMjAyNC0xMi0zMSIsImRlc2NyaXB0aW9uIjoi56uL5rOV6Zmi5LuK5aSp5LiJ6K6A6YCa6YGO5bCx5qWt5pyN5YuZ5rOV6YOo5YiG5L+u5q2j5qKd5paH77yMODDmrbLku6XkuIrplbfogIXogZjlg7HlpJbnsY3nnIvorbflhY3ntpPphqvnmYLoqZXkvLDjgILli57li5Xpg6jlsI3mraTooajnpLrpgbrmhr7vvIzoqo3ngrrmnIPmm7Tpm6Pmib7liLDmiJbnlZnkuIvlpJbnsY3nnIvorbflt6XkurrlipvvvIzkuZ/lsI3mlrznhafpoaflk4Hos6rpgKDmiJDlvbHpn7/jgIJcblxu5be05rCP6YeP6KGo55uu5YmN5piv6ZW354Wn5a625bqt55Sz6KuL6IGY5YOx5aSW57GN55yL6K2355qE6Yar55mC6KmV5Lyw5Li76KaB5L6d5pOa77yM56uL5rOV6Zmi5LuK5aSp5LiJ6K6A6YCa6YGO5bCx5qWt5pyN5YuZ5rOV6YOo5YiG5qKd5paH77yM5LiJ6K6A5qKd5paH5piO5a6a77yM6ZuH5Li76IGY5YOx5aSW5ZyL5Lq65b6e5LqL5a625bqt55yL6K235bel5L2c77yM6KKr55yL6K236ICF5Yeh5bm06b2hODDmrbLku6XkuIrvvIzmiJY3MOatsuiHszc55q2y5oKj5pyJ55mM55eH5LqM5pyf5Lul5LiK6ICF77yM5b6X5YWN57aT6Yar55mC5qmf5qeL5LmL5bCI5qWt6KmV5Lyw44CCIiwiaWQiOiIxNzU0MjkyNDM5MTczIiwibWVkaWEiOlt7ImZpbGVuYW1lIjoidXJsXzE3NTQyOTI0NjYyMDUiLCJpZCI6IjE3NTQyOTI0NjYyMDUiLCJpc1VybCI6dHJ1ZSwib3JpZ2luYWxOYW1lIjoiMTIwMHg4NzVfd21reV8zNzUyNTA5MTEyNDBfMjAyNDEyMzEwMDQ0MDAwMDAwLmpwZyIsInBhdGgiOiJodHRwczovL2ltZ2Nkbi5jbmEuY29tLnR3L3d3dy9XZWJQaG90b3MvODAwLzIwMjQxMjMxLzEyMDB4ODc1X3dta3lfMzc1MjUwOTExMjQwXzIwMjQxMjMxMDA0NDAwMDAwMC5qcGciLCJ0eXBlIjoiaW1hZ2UiLCJ1cmwiOiJodHRwczovL2ltZ2Nkbi5jbmEuY29tLnR3L3d3dy9XZWJQaG90b3MvODAwLzIwMjQxMjMxLzEyMDB4ODc1X3dta3lfMzc1MjUwOTExMjQwXzIwMjQxMjMxMDA0NDAwMDAwMC5qcGcifV0sIm9yZGVyIjo2LCJ0aXRsZSI6IuiXjeeZveW8t+ihjOmAmumBju+8jDgw5q2y5Lul5LiK5YWN5be05rCP6YeP6KGo6KuL5aSW5YKtIn0seyJkYXRlIjoiMjAyNS0wMS0xMyIsImRlc2NyaXB0aW9uIjoi5piv5ZCm5pS+5a+s5Lit5ZyL57GN6YWN5YG25Y+W5b6X5Y+w54Gj6Lqr5YiG6K2J5bm06ZmQ77yM5pyd6YeO5pqr5LyR5oiw77yB6JeN55m95pys6YCx5LqM77yIMTTml6XvvInku6XkurrmlbjlhKrli6LvvIzmlrznqIvluo/lp5Tlk6HmnIPlvLfli6LpgJrpl5zjgIzlhanlsrjkurrmsJHpl5zkv4Lmop3kvovjgI3kv67mraPmoYjvvIzkuKbpoIbliKnmjpLlhaXku4rvvIgxN+aXpe+8ieitsOeoi++8jOeEtuiAjOWci+awkem7qOWcmOWNu+aWvOacg+S4reaPkOahiO+8jOWwh+WMheaLrOe4ruefreS4remFjeWFpeexjeW5tOmZkOWcqOWFp+eahOaJgOacieWgseWRiuS6i+mghe+8jOWFqOmDqOmAgOWbnueoi+W6j+WnlOWToeacg+OAglxuXG7nubzlnIvmsJHpu6jnq4vlp5ToqLHlrofnlITvvIzmuLjpoaXmnKzmnIPmnJ/lho3mrKHmj5Dlh7rjgIzlhanlsrjkurrmsJHpl5zkv4Lmop3kvovnrKwxN+aineS/ruato+iNieahiOOAje+8jOW7uuitsOWwh+S4remFjeWPluW+l+i6q+WIhuitieeahOW5tOmZkOavlOeFp+WklumFje+8jOW+njblubTnuK7nn63ngro05bm077yM5YSY566h5rCR6YCy6buo5ZyY5o+Q5Ye655Ww6K2w77yM6Kmy5qGIMTTml6Xku43ntpPnq4vpmaLnqIvluo/lp5Tlk6HmnIPmjpLlhaUxN+aXpemZouacg+WgseWRiuS6i+mgheesrDEx5qGI44CCIiwiaWQiOiIxNzU0MjkyNjQwMzYzIiwibWVkaWEiOlt7ImZpbGVuYW1lIjoidXJsXzE3NTQyOTI2NDI1NzYiLCJpZCI6IjE3NTQyOTI2NDI1NzYiLCJpc1VybCI6dHJ1ZSwib3JpZ2luYWxOYW1lIjoiZDYzZDM5YTI1NTRjNzg3ZjU2YTgzMjRlYjcyODAyYWYiLCJwYXRoIjoiaHR0cHM6Ly9zLnlpbWcuY29tL255L2FwaS9yZXMvMS4yLzc3V25ocVRiQjdkZHZDNjk3REQ2UGctLS9ZWEJ3YVdROWFHbG5hR3hoYm1SbGNqdDNQVGsyTUR0b1BUVTBNQS0tL2h0dHBzOi8vbWVkaWEuemVuZnMuY29tL3poLXR3L21uZXdzX3R3XzI1OC9kNjNkMzlhMjU1NGM3ODdmNTZhODMyNGViNzI4MDJhZiIsInR5cGUiOiJpbWFnZSIsInVybCI6Imh0dHBzOi8vcy55aW1nLmNvbS9ueS9hcGkvcmVzLzEuMi83N1duaHFUYkI3ZGR2QzY5N0RENlBnLS0vWVhCd2FXUTlhR2xuYUd4aGJtUmxjanQzUFRrMk1EdG9QVFUwTUEtLS9odHRwczovL21lZGlhLnplbmZzLmNvbS96aC10dy9tbmV3c190d18yNTgvZDYzZDM5YTI1NTRjNzg3ZjU2YTgzMjRlYjcyODAyYWYifV0sIm9yZGVyIjo3LCJ0aXRsZSI6IuiXjeWnlOa4uOmhpeetieS6uumHjeaPkO+8jOS4remFjTblubTmlLk05bm077yM5pS+5a+s5Lit6YWN5Y+W5b6X6Lqr5YiG6K2J5ZKM6Kaq5bGs5L6G5Y+w5a6a5bGF5qKd5Lu2In0seyJkYXRlIjoiMjAyNS0wMS0xNyIsImRlc2NyaXB0aW9uIjoi6Zmz5paM6I+v5oyH5Ye677yM5rCR6YCy6buo5pS/5bqc55qE5aqS5a6j6aCQ566X5pq05aKe77yM5Y+N5pig5YW244CM57KJ6aO+5aSq5bmz44CB5o6p6JOL54Sh6IO944CN55qE5oSP5ZyW44CC5LuW5oyH5o6n77yM5rCR6YCy6buo5Yip55So5aqS5a6j6LK76LGi6aSK57ay6LuN77yM5pS75pOK55Ww5bex5Lim5oq56buR5Lit5ZyL44CC5LuW55Sa6Iez6IGy56ix77yM44CM5bO25YWn5ZCE55WM5bCN5q2k5pep5pyJ5YWs6KuW44CN44CC54S26ICM77yM6YCZ5q6155m86KiA6KKr5Y+w54Gj57ay5Y+L6KaW54K65LiN55W25bmy5raJ5YWn5pS/77yM5Lim5aSn6IKG5oyW6Ium5Zyo6YeO6buo55qE5Yiq6aCQ566X6KGM54K65piv44CM542y5b6X56WW5ZyL6KqN6K2J44CN44CM5ZyL5Y+w6L6m6KqH542O5aW05omN44CN44CCIiwiaWQiOiIxNzU0MjkyNzM0OTY1IiwibWVkaWEiOlt7ImZpbGVuYW1lIjoidXJsXzE3NTQyOTI3MzczMjAiLCJpZCI6IjE3NTQyOTI3MzczMjAiLCJpc1VybCI6dHJ1ZSwib3JpZ2luYWxOYW1lIjoiYjUxMGNhNTUtNjc0Mi00ZjllLWFhMDgtOGEyNGRlZGUyNTMyLXcyNDAwLndlYlAiLCJwYXRoIjoiaHR0cHM6Ly92My1zdGF0aWNzLm1pcnJvcm1lZGlhLm1nL2ltYWdlcy9iNTEwY2E1NS02NzQyLTRmOWUtYWEwOC04YTI0ZGVkZTI1MzItdzI0MDAud2ViUCIsInR5cGUiOiJpbWFnZSIsInVybCI6Imh0dHBzOi8vdjMtc3RhdGljcy5taXJyb3JtZWRpYS5tZy9pbWFnZXMvYjUxMGNhNTUtNjc0Mi00ZjllLWFhMDgtOGEyNGRlZGUyNTMyLXcyNDAwLndlYlAifV0sIm9yZGVyIjo4LCJ0aXRsZSI6IuS4reWFseWci+WPsOi+puWkp+WKm+eoseiumuiXjeeZveegjemgkOeulyJ9LHsiZGF0ZSI6IjIwMjUtMDEtMjAiLCJkZXNjcmlwdGlvbiI6IuWPsOeBo+eri+azlemZouWcqOatt+e2k+i3qOaXpeOAgTIw5bCP5pmC5LiN5pa36Zu76KGo5rG65LiL77yM55Sx5Zyo6YeO55qE5ZyL5rCR6buo44CB5rCR55y+6buo6IGv5omL5LiJ6K6A6YCa6YGOMjAyNeW5tOS4reWkruaUv+W6nOe4vemgkOeul+ahiO+8jOe4vemgkOeul+atsuWHuueUseWOn+WFiOe3qOWIl+eahDPlhYYxMzI15YSE77yI5paw5Y+w5bmj77yJ5rib54K6MuWFhjkyNDjlhITlhYPvvIzlr6norbDntZDmnpzntpPkuLvoqIjnuL3omZXoqIjnrpfvvIzmiKroh7Mx5pyIMjPml6XkuIvljYgxN+aZguWFseioiOa4m+WIl+e0hDIwNzblhITlhYPvvIzliKrmuJvph5HpoY3libXkuIvmlrDpq5jvvIzmrbLlhaUz5YWGMTUzNOWEhOWFg+WJh+aYr+WPsuS4iummluW6pueqgeegtDPlhYbjgIIiLCJpZCI6IjE3NTQyOTI5NjE3NzYiLCJtZWRpYSI6W3siZmlsZW5hbWUiOiJ1cmxfMTc1NDI5Mjk2MzgyMyIsImlkIjoiMTc1NDI5Mjk2MzgyMyIsImlzVXJsIjp0cnVlLCJvcmlnaW5hbE5hbWUiOiI0ODU2NTE2Yy1iYTlhLTQwZjItODBhMC04NTA2NGY2ZDQ5NDgtdzE2MDAud2ViUCIsInBhdGgiOiJodHRwczovL3YzLXN0YXRpY3MubWlycm9ybWVkaWEubWcvaW1hZ2VzLzQ4NTY1MTZjLWJhOWEtNDBmMi04MGEwLTg1MDY0ZjZkNDk0OC13MTYwMC53ZWJQIiwidHlwZSI6ImltYWdlIiwidXJsIjoiaHR0cHM6Ly92My1zdGF0aWNzLm1pcnJvcm1lZGlhLm1nL2ltYWdlcy80ODU2NTE2Yy1iYTlhLTQwZjItODBhMC04NTA2NGY2ZDQ5NDgtdzE2MDAud2ViUCJ9XSwib3JkZXIiOjksInRpdGxlIjoi6JeN55m95YWp6buo6YCa6YGO5LqC5Yiq5YeN6aCQ566X77yM5Zq06YeN5b2x6Z+/5Y+w54Gj5rCR55Sf44CB5ZyL5a6JIn0seyJkYXRlIjoiMjAyNS0wMi0yMCIsImRlc2NyaXB0aW9uIjoi5ZyL5rCR6buo5ZyY57i95Y+s5YKF5bSQ6JCB77yMMjDml6XmmZrplpPvvIzlkozlprvlrZDoirHok67nuKPplbflvpDmppvolJrkuIDotbflvp7pppnmuK/ov5Tlj7DvvIzlnKjoirHok67mqZ/loLTlj5foqKrmmYLvvIzku5booajnpLroh6rlt7Hlj4jlrozmiJDkuobkuIDpoIXmrbflj7Lku7vli5njgILlj6rmmK/vvIzku5botbTkuK3nmoTmtojmga/vvIzlvJXnmbzpl5zms6jvvIzpgoTmnInkurrnibnliKXkvobmjqXmqZ/vvIzmnbHnpL7nmbzoqIDkurrpmbPosqHog73lrojlnKjmqZ/loLTploDlj6PvvIznlbbpnaLll4bku5bmmK/kuK3lhbHotbDni5fjgIIiLCJpZCI6IjE3NTQyOTMwNTA3NTMiLCJtZWRpYSI6W3siZmlsZW5hbWUiOiJ1cmxfMTc1NDI5MzA1Mzc5OCIsImlkIjoiMTc1NDI5MzA1Mzc5OCIsImlzVXJsIjp0cnVlLCJvcmlnaW5hbE5hbWUiOiI2ZTlkYjc1Mi0zMGE4LTQ5YzgtODgyNC03NzdmNDkyODcxNjguanBnIiwicGF0aCI6Imh0dHBzOi8vY2RuLmZ0dm5ld3MuY29tLnR3L21hbmFzeXN0ZW0vRmlsZURhdGEvTmV3cy8xLzZlOWRiNzUyLTMwYTgtNDljOC04ODI0LTc3N2Y0OTI4NzE2OC5qcGciLCJ0eXBlIjoiaW1hZ2UiLCJ1cmwiOiJodHRwczovL2Nkbi5mdHZuZXdzLmNvbS50dy9tYW5hc3lzdGVtL0ZpbGVEYXRhL05ld3MvMS82ZTlkYjc1Mi0zMGE4LTQ5YzgtODgyNC03NzdmNDkyODcxNjguanBnIn1dLCJvcmRlciI6MTAsInRpdGxlIjoi5YKF5bSQ6JCB6aaZ5riv6L+U5Y+w77yM56ixPOWujOaIkOatt+WPsuS7u+WLmT4ifSx7ImRhdGUiOiIyMDI1LTAzLTIxIiwiZGVzY3JpcHRpb24iOiLljrvlubTnuL3ntbHos7TmuIXlvrfmj5DlkI3nmoTlj7jms5XpmaLmraPjgIHlia/pmaLplbflj4rlpKfms5XlrpjlhbHkuIPlkI3kurrpgbjvvIzlhajmlbjpga3liLDnq4vms5XpmaLlkKbmsbrvvIzngrrkuoblrojorbfoh6rnlLHmsJHkuLvmhrLmlL/liLbluqbjgIHmj5DljYflnIvlronmoYjku7blsIjmpa3og73ph4/kuKbmjIHnuozmjqjli5Xlj7jms5XmlLnpnanvvIznuL3ntbHkvp3mk5rmhrLms5Xlop7kv67mop3mlofnrKzkupTmop3opo/lrprvvIzph43mlrDmj5DlkI3lj7jms5XpmaLkurrkuovvvJsyMeaXpeeUseWJr+e4vee1seiVree+jueQtOWFrOW4g+WFqOaWsOWQjeWWrueCuu+8muWPuOazlemZoumVt+iiq+aPkOWQjeS6uueCuuiUoeeni+aYjuOAgeWJr+mZoumVt+iiq+aPkOWQjeS6uueCuuiYh+e0oOWopeS7peWPiuWPuOazlemZouWkp+azleWumOiiq+aPkOWQjeS6uueCuuiVreaWh+eUn+OAgemEree0lOaDoOOAgeael+m6l+eRqeOAgemZs+aFiOmZveWPiuipuemOruamruetieS6uu+8jOWQjOaZguS5n+acg+WcqDIx5pel55W25aSp5ZKo6KuL56uL5rOV6Zmi5ZCM5oSP44CCIiwiaWQiOiIxNzU0MjkzMTI3MDEwIiwibWVkaWEiOlt7ImZpbGVuYW1lIjoidXJsXzE3NTQyOTMxMjg4NzciLCJpZCI6IjE3NTQyOTMxMjg4NzciLCJpc1VybCI6dHJ1ZSwib3JpZ2luYWxOYW1lIjoiMjAwMHgxMzczX3dta3lfOTcyNzE0NzM2NTMwMTFfMjAyNTA3MjUwMDM3MDAwMDAwLmpwZyIsInBhdGgiOiJodHRwczovL2ltZ2Nkbi5jbmEuY29tLnR3L3d3dy9XZWJQaG90b3MvMTAyNC8yMDI1MDcyNS8yMDAweDEzNzNfd21reV85NzI3MTQ3MzY1MzAxMV8yMDI1MDcyNTAwMzcwMDAwMDAuanBnIiwidHlwZSI6ImltYWdlIiwidXJsIjoiaHR0cHM6Ly9pbWdjZG4uY25hLmNvbS50dy93d3cvV2ViUGhvdG9zLzEwMjQvMjAyNTA3MjUvMjAwMHgxMzczX3dta3lfOTcyNzE0NzM2NTMwMTFfMjAyNTA3MjUwMDM3MDAwMDAwLmpwZyJ9XSwib3JkZXIiOjExLCJ0aXRsZSI6Iuepuue8uueahDflkI3lpKfms5XlrpjkurrpgbgsIOWFqOaVuOmBreiXjeeZveaJgOacieeri+WnlOeahOWQpuaxuiJ9LHsiZGF0ZSI6IjIwMjUtMDQtMTUiLCJkZXNjcmlwdGlvbiI6IumHneWwjeWci+awkem7qOOAgeawkeecvum7qOaJueiplei/keaXpeawkemAsum7qOWFp+eIhueZvOWkmui1t+WFseirnOahiO+8jOeri+azlemZouawkemAsum7qOWcmOW8t+iqv++8jOawkemAsum7qOesrOS4gOaZgumWk+Wwh+a2ieahiOiAhemAgei+puOAgemWi+mZpOm7qOexjee1leS4jeWvrOiyuO+8jOS4jeepjealteiZleeQhuaJjeaYr+WMheW6h++8jOiXjeeZveWPquacg+ittOiyrOWPl+Wus+iAhe+8jOiAjOS4jeWOu+aJueipleWKoOWus+iAhe+8jOWwseaYr+iDjOW+jOeahOS4reWFse+8m+eUmuiHs+WcqOWci+acg+mYu+aTi+awkemAsum7qOWcmOaJgOaPkOOAjOWci+WuieWNgeazleOAje+8jOWFieeri+WnlOi1tOS4ree0jeeuoee4veioiOWwseaTi+S6hjMxOeasoe+8jOWIsOW6lemChOimgeaTi+WkmuS5he+8n1xuXG7msJHpgLLpu6jlnJjku4roiInooYzjgIzlj43lhbHoq5zmu7LpgI8g5bCx5pSv5oyB5ZyL5a6J5rOV5qGI44CN6KiY6ICF5pyD44CC5rCR6YCy6buo5ZyY5bm55LqL6ZW35ZCz5oCd55Gk6KGo56S677yM5YWx6Kuc5bCx5piv5YWo5rCR5YWs5pW177yM6Z2i5bCN5Lu75L2V5Z6L5oWL55qE5YWx6Kuc77yM55W254S26KaB5L6d5rOV56m26L6m44CB5Zq05oey77yM6Iul54++6KGM5rOV5b6L5LiN5aSg5Zq05qC844CB566h55CG5LiN5aSg5YWo6Z2i77yM55W254S26KaB6KOc5ryP77yM6YCZ5piv5rCR6YCy6buo5q2j5Yqq5Yqb6YCy6KGM55qE5LqL44CCIiwiaWQiOiIxNzU0MjkzMjkzNDU4IiwibWVkaWEiOlt7ImZpbGVuYW1lIjoidXJsXzE3NTQyOTMzMTA3ODMiLCJpZCI6IjE3NTQyOTMzMTA3ODMiLCJpc1VybCI6dHJ1ZSwib3JpZ2luYWxOYW1lIjoiMTIwMHg3MTZfNzU5OTMyNTkyNjI4LmpwZyIsInBhdGgiOiJodHRwczovL2ltZ2Nkbi5jbmEuY29tLnR3L3d3dy9XZWJQaG90b3MvODAwLzIwMjUwNDE3LzEyMDB4NzE2Xzc1OTkzMjU5MjYyOC5qcGciLCJ0eXBlIjoiaW1hZ2UiLCJ1cmwiOiJodHRwczovL2ltZ2Nkbi5jbmEuY29tLnR3L3d3dy9XZWJQaG90b3MvODAwLzIwMjUwNDE3LzEyMDB4NzE2Xzc1OTkzMjU5MjYyOC5qcGcifV0sIm9yZGVyIjoxMiwidGl0bGUiOiLol43nmb3pgKPnuowzMTnmrKHpmLvmk4vlvLfljJblnIvlronnmoTkv67ms5Xmj5DmoYgifSx7ImRhdGUiOiIyMDI1LTA1LTMxIiwiZGVzY3JpcHRpb24iOiLlnIvmsJHpu6jnq4vlp5TpmbPmsLjlurfmj5DmoYjkv67mraPjgIrlhanlsrjkurrmsJHpl5zkv4Lmop3kvovjgIvnrKwyOeaine+8jOaKiuemgemZkOWItuawtOWfn+WFrOWRiuasiuiyrOeUseWci+mYsumDqOaUueeCuua1t+WnlOacg++8jOiAjOS4lOeri+azleimgeaXqOaPkOWPiuWFqeWyuOWFp+aIsOWwmuacque1kOadn++8jOW8lei1t+mXnOazqOOAgumZs+awuOW6t+S7iu+8iDEz77yJ5pel6KGo56S677yM6YeR6aas5rC05Z+f5bey6Kej6Zmk6LuN566h77yM566h55CG5Lmf6YCQ5q2l56e75Lqk5rW35beh572y77yM6Iul56aB6ZmQ5Yi25rC05Z+f5YqD6Kit5qyK6LKs5LuN55Sx5ZyL6Ziy6YOo5o6M566h77yM5LiN5piv5b6I5aWH5oCq77yf5LiN6YGO5rCR6YCy6buo56uL5aeU5om56KmV77yM5L+u5rOV5Zyo5qih57OK5YyW5Y+w54Gj5Li75qyK44CCIiwiaWQiOiIxNzU0MjkzNTY0Mjc1IiwibWVkaWEiOlt7ImZpbGVuYW1lIjoidXJsXzE3NTQyOTM1NjY0MzUiLCJpZCI6IjE3NTQyOTM1NjY0MzUiLCJpc1VybCI6dHJ1ZSwib3JpZ2luYWxOYW1lIjoiMzIyOTI2MDguanBnJng9MCZ5PTAmc3c9MCZzaD0wJnNsPVcmZnc9ODAwJmV4cD0zNjAwIiwicGF0aCI6Imh0dHBzOi8vcGd3LnVkbi5jb20udHcvZ3cvcGhvdG8ucGhwP3U9aHR0cHM6Ly91Yy51ZG4uY29tLnR3L3Bob3RvLzIwMjUvMDYvMTMvcmVhbHRpbWUvMzIyOTI2MDguanBnJng9MCZ5PTAmc3c9MCZzaD0wJnNsPVcmZnc9ODAwJmV4cD0zNjAwIiwidHlwZSI6ImltYWdlIiwidXJsIjoiaHR0cHM6Ly9wZ3cudWRuLmNvbS50dy9ndy9waG90by5waHA/dT1odHRwczovL3VjLnVkbi5jb20udHcvcGhvdG8vMjAyNS8wNi8xMy9yZWFsdGltZS8zMjI5MjYwOC5qcGcmeD0wJnk9MCZzdz0wJnNoPTAmc2w9VyZmdz04MDAmZXhwPTM2MDAifV0sIm9yZGVyIjoxMywidGl0bGUiOiLlnIvmsJHpu6jnq4vlp5TpmbPmsLjlurfnrYnmj5DmoYjkv67oqILlhanlsrjkurrmsJHpl5zkv4Lmop3kvovvvIzlhaflrrnlgbfmuKHjgIzlhanlsrjlhafmiLDni4DmhYvjgI3mpoLlv7UifSx7ImRhdGUiOiIyMDI1LTA2LTI3IiwiZGVzY3JpcHRpb24iOiLlnIvmsJHpu6jjgIHmsJHnnL7pu6jmjqjjgIzkuI3lnKjnsY3mipXnpajjgI3vvIwyMDI15bm0NuaciDI35pel5Zyo56uL6Zmi5LiA6K6A77yM6Yed5bCN44CM5Y+w54Gj5pys5Zyf44CN6YCy6KGM5LiN5Zyo57GN5oqV56Wo77yM5Zyo5Lit5ZyL55qE5Y+w5ZWG5LiN6YGp55So77yM5L2G5b6L5bir5p6X5pm6576k6KqN54K677yM6YKE5piv5pyD55Si55Sf5Zq06YeN55qE5ZWP6aGM77yM5Zug54K65Y+q6KaB5o+Q5Ye644CM6Lqr5YiG6K2J5q2j5Y+N6Z2i5b2x5pys44CN77yM5bCx5Y+v5Lul55Sz6KuL44CM5LiN5Zyo57GN5oqV56Wo44CN44CCIiwiaWQiOiIxNzU0Mjk0MTU3MjAyIiwibWVkaWEiOlt7ImZpbGVuYW1lIjoidXJsXzE3NTQyOTQxNTg5ODEiLCJpZCI6IjE3NTQyOTQxNTg5ODEiLCJpc1VybCI6dHJ1ZSwib3JpZ2luYWxOYW1lIjoiMTMxNHg4MzZfd21rbl84MDM5NTkxMTc4MV8wLmpwZyIsInBhdGgiOiJodHRwczovL2ltZ2Nkbi5jbmEuY29tLnR3L3d3dy9XZWJQaG90b3MvMTAyNC8yMDI0MDEyNC8xMzE0eDgzNl93bWtuXzgwMzk1OTExNzgxXzAuanBnIiwidHlwZSI6ImltYWdlIiwidXJsIjoiaHR0cHM6Ly9pbWdjZG4uY25hLmNvbS50dy93d3cvV2ViUGhvdG9zLzEwMjQvMjAyNDAxMjQvMTMxNHg4MzZfd21rbl84MDM5NTkxMTc4MV8wLmpwZyJ9XSwib3JkZXIiOjE0LCJ0aXRsZSI6IuiXjeeZveaOqOS4jeWcqOexjeaKleelqCJ9LHsiZGF0ZSI6IjIwMjUtMDctMTAiLCJkZXNjcmlwdGlvbiI6IuWci+awkem7qOeri+WnlOmZs+awuOW6t+etieiXjeWnlOaPkOWHuuOAiuWci+WutuWuieWFqOaIsOeVpeazleOAi++8jOmBreaJueS8geWcluWJneWlque4vee1seWci+WutuWuieWFqOS6i+WLmeaxuuetluasiu+8jOaetuepuuWci+WutuWuieWFqOacg+itsO+8jOiuk+eri+azlemZouafk+aMh+Wci+WuieaxuuetluOAguWwjeatpO+8jOe2k+awkemAo+WPiue9t+WcmOWPrOmWi+iBr+WQiOiomOiAheacg++8jOeXm+aJueS/ruazleaYr+WwjeePvuihjOmrlOWItumAsuihjOS4ieWkp+mBleaGsumhm+imhu+8jOiLpeatpOazleahiOmAmumBju+8jOS4jeWDheegtOWjnuaGsuazleasiuWKm+WIhueri+ioreioiO+8jOabtOWwh+iuk+eri+azlemZoumBjuW6puafk+aMh+Wci+WuieS6i+WLmeOAgiIsImlkIjoiMTc1NDI5NDIwNDgyMyIsIm1lZGlhIjpbeyJmaWxlbmFtZSI6InVybF8xNzU0Mjk0MjA2NDgwIiwiaWQiOiIxNzU0Mjk0MjA2NDgwIiwiaXNVcmwiOnRydWUsIm9yaWdpbmFsTmFtZSI6IkZBMEExMDQyLTUyNzMtNEY1MC05NzU0LTQ5MEFDRDMxRjc1QiVFNiU4QiVCNyVFOCVCMiU5RC5qcGVnP2ZpdD0yMDQ4JTJDMTM2NSZzc2w9MSIsInBhdGgiOiJodHRwczovL2kwLndwLmNvbS9tbWVkaWEuY29tLnR3L3dwLWNvbnRlbnQvdXBsb2Fkcy8yMDI0LzA1L0ZBMEExMDQyLTUyNzMtNEY1MC05NzU0LTQ5MEFDRDMxRjc1QiVFNiU4QiVCNyVFOCVCMiU5RC5qcGVnP2ZpdD0yMDQ4JTJDMTM2NSZzc2w9MSIsInR5cGUiOiJpbWFnZSIsInVybCI6Imh0dHBzOi8vaTAud3AuY29tL21tZWRpYS5jb20udHcvd3AtY29udGVudC91cGxvYWRzLzIwMjQvMDUvRkEwQTEwNDItNTI3My00RjUwLTk3NTQtNDkwQUNEMzFGNzVCJUU2JThCJUI3JUU4JUIyJTlELmpwZWc/Zml0PTIwNDglMkMxMzY1JnNzbD0xIn1dLCJvcmRlciI6MTUsInRpdGxlIjoi6JeN5o6o44CM5ZyL5a625a6J5YWo5oiw55Wl5rOV44CN77yM5oSP5ZyW5p+T5oyH57i957Wx5ZyL5a6J5rG6562WIn0seyJkYXRlIjoiMjAyNS0wNy0xOCIsImRlc2NyaXB0aW9uIjoi56uL5rOV6Zmi5Y+45rOV5Y+K5rOV5Yi25aeU5ZOh5pyDNuaciDTml6XliJ3lr6npgJrpgY7nq4vlp5TmiYDmj5DliJHms5Xpg6jliIbmop3mlofkv67mraPojYnmoYjvvIzmnInpl5zmj5Dpq5jomZDnq6Xoh7TmrbvliJHluqbmnIDpq5joh7PmrbvliJHmiJbnhKHmnJ/lvpLliJHnrYnmop3mlofvvIzmnJ3ph47pm5blnYfmlK/mjIHliqDph43liJHosqzvvIzkvYblnKjnq4vms5XmioDooZPkuIrmnKrpgZTmiJDlhbHorZjvvIzlm6DmraTkv53nlZnkuqTpu6jlnJjljZTllYbjgILpu6jlnJjljZTllYblvozmnJ3ph47pgZTmiJDlhbHorZjvvIzljIXmi6zmnJ3ph47pg73mlK/mjIHlop7oqILliJHms5XnrKwyNzLmop3kuYsx5qKd5paH77yM5L2G5L+d55WZ5YiR5rOV56ysMjg25qKd5qKd5paH6YCB56uL5rOV6Zmi5pyD6JmV55CG44CCXG5cbuWci+awkem7qOiIh+awkeecvum7qOaEj+WcluS7peeri+azleS4jeWRqOeahOaineaWh++8jOaTjeS9nOawkemAsum7qOS4jeaUr+aMgeWFkuerpeiZkOW+hemHjee9sOazleahiOOAgiIsImlkIjoiMTc1NDI5NDM4MTA4MCIsIm1lZGlhIjpbeyJmaWxlbmFtZSI6InVybF8xNzU0Mjk0NDAwNDM4IiwiaWQiOiIxNzU0Mjk0NDAwNDM4IiwiaXNVcmwiOnRydWUsIm9yaWdpbmFsTmFtZSI6ImM0MzFiMDA0YTQ5NGQ1NDc1NDA3YzFjY2Y4YTU0NGFhLndlYnAiLCJwYXRoIjoiaHR0cHM6Ly9zdGF0aWMua21lZGlhLmNvbS50dy9wcmQvMjAyNS8wNzE4LzJEQjU0Qzk1M0MwNDgyQjdEMDFGN0EyNzRBQkYyNUQ2L2M0MzFiMDA0YTQ5NGQ1NDc1NDA3YzFjY2Y4YTU0NGFhLndlYnAiLCJ0eXBlIjoiaW1hZ2UiLCJ1cmwiOiJodHRwczovL3N0YXRpYy5rbWVkaWEuY29tLnR3L3ByZC8yMDI1LzA3MTgvMkRCNTRDOTUzQzA0ODJCN0QwMUY3QTI3NEFCRjI1RDYvYzQzMWIwMDRhNDk0ZDU0NzU0MDdjMWNjZjhhNTQ0YWEud2VicCJ9XSwib3JkZXIiOjE2LCJ0aXRsZSI6IuiXjeeZveW8t+ihjOmAmumBjueri+azleS4jeWRqOeahOWFkuiZkOmYsuayu+ebuOmXnOazleahiCJ9LHsiZGF0ZSI6IjIwMjUtMDctMjUiLCJkZXNjcmlwdGlvbiI6IuaGsuazleazleW6reaMgee6jOiiq+eZseeYk+OAglxuXG7nq4vms5XpmaLku4rml6XvvIg35pyIMjXml6XvvInkuIrljYjooYzkvb/lpKfms5XlrpjkurrkuovlkIzmhI/mrIrmipXnpajvvIzooqvmj5DlkI3kurrlv4XpoIjopoHnjbLlvpflh7rluK3nq4vlp5TkuozliIbkuYvkuIDlkIzmhI/miY3og73pgJrpgY7jgILlnIvmsJHpu6jlnJjlnKjmipXnpajliY3lt7LntpPooajmmI7lhajmlbjlkKbmsbrvvIzmsJHnnL7pu6jlnJjlhbblvozkuZ/ooajmmI7lhajpg6jkuI3lkIzmhI/vvIzmsJHpgLLpu6jlnJjliYfmmK/ph53lsI3pmbPmhYjpmb3oiIfoqbnpjq7mpq7lhankurrplovmlL7pu6jnsY3nq4vlp5Toh6rnlLHmipXnpajvvIzmnIDntYLntZDmnpw35ZCN5aSn5rOV5a6Y5o+Q5ZCN5Lq65YWo5pW46YGt5Yiw5ZCm5rG644CCIiwiaWQiOiIxNzU0Mjk0NDg4NzcxIiwibWVkaWEiOlt7ImZpbGVuYW1lIjoidXJsXzE3NTQyOTQ0OTA2NzciLCJpZCI6IjE3NTQyOTQ0OTA2NzciLCJpc1VybCI6dHJ1ZSwib3JpZ2luYWxOYW1lIjoid2lkZV90c2E5MTh4X1NfXzEzMDQ0MTIyOS5qcGciLCJwYXRoIjoiaHR0cHM6Ly9yd25ld3MudHcvdXBsb2FkL25ld3N0ZW1wXzIxMzg3L3dpZGVfdHNhOTE4eF9TX18xMzA0NDEyMjkuanBnIiwidHlwZSI6ImltYWdlIiwidXJsIjoiaHR0cHM6Ly9yd25ld3MudHcvdXBsb2FkL25ld3N0ZW1wXzIxMzg3L3dpZGVfdHNhOTE4eF9TX18xMzA0NDEyMjkuanBnIn0seyJmaWxlbmFtZSI6InVybF8xNzU0MzI1NzU2NjcyIiwiaWQiOiIxNzU0MzI1NzU2NjcyIiwiaXNVcmwiOnRydWUsIm9yaWdpbmFsTmFtZSI6Ik95djduN1l1MTJrP3NpPU5EQWNXc2JwY0UxcmJnTXgiLCJwYXRoIjoiaHR0cHM6Ly95b3V0dS5iZS9PeXY3bjdZdTEyaz9zaT1OREFjV3NicGNFMXJiZ014IiwidHlwZSI6InZpZGVvIiwidXJsIjoiaHR0cHM6Ly95b3V0dS5iZS9PeXY3bjdZdTEyaz9zaT1OREFjV3NicGNFMXJiZ014In1dLCJvcmRlciI6MTcsInRpdGxlIjoi5YaN5bqm5o+Q5ZCN55qEN+WQjeWkp+azleWumOS6uumBuCwg6YGt5Y+X6JeN55m95omA5pyJ56uL5aeU55qE5YWo5pW45ZCm5rG6In1dLCJpZCI6IjIwZWE2Y2I0LTYzM2ItNGVkOC05ZjRhLTVkMzdmMWRlNmY0YiIsImxhc3RNb2RpZmllZCI6IjIwMjUtMDgtMDRUMTY6NDI6NDMuNjgwMzk2NDAwKzAwOjAwIn0=';

            function base64DecodeUTF8(base64) {
                try {
                    if (typeof TextDecoder !== 'undefined') {
                        const binaryString = atob(base64);
                        const bytes = new Uint8Array(binaryString.length);
                        for (let i = 0; i < binaryString.length; i++) {
                            bytes[i] = binaryString.charCodeAt(i);
                        }
                        const decoder = new TextDecoder('utf-8');
                        return decoder.decode(bytes);
                    }
                    
                    const binaryString = atob(base64);
                    const escapedString = binaryString.split('').map(function(char) {
                        const code = char.charCodeAt(0);
                        return code < 128 ? char : '%' + ('0' + code.toString(16)).slice(-2);
                    }).join('');
                    
                    return decodeURIComponent(escapedString);
                    
                } catch (error) {
                    console.error('‚ùå Base64 UTF-8 Ëß£Á¢ºÂ§±Êïó:', error);
                    return atob(base64);
                }
            }

            // üö® Ëá™ÂãïËß£ÂØÜÂáΩÂºè - ‰∏çÈúÄË¶ÅÂØÜÁ¢ºÔºåÁ´ãÂç≥Âü∑Ë°å
            window.decryptMemoirData = async function() {
                try {
                    console.log('üîÑ ÈñãÂßãËá™ÂãïËß£ÂØÜÔºàÂõûÈÄÄÊ®°ÂºèÔºâ...');
                    
                    const decodedData = base64DecodeUTF8(fallbackData);
                    console.log('üîç Ëß£Á¢ºÂæåÁöÑË≥áÊñôÈï∑Â∫¶:', decodedData.length);
                    
                    globals.MEMOIR_DATA = JSON.parse(decodedData);
                    
                    if (globals.MEMOIR_DATA && globals.MEMOIR_DATA.chineseName) {
                        console.log('‚úÖ ‰∏≠ÊñáÂêçÁ®±Ëß£Á¢ºÁµêÊûú:', globals.MEMOIR_DATA.chineseName);
                        console.log('‚úÖ ‰∫ã‰ª∂Êï∏Èáè:', globals.MEMOIR_DATA.events ? globals.MEMOIR_DATA.events.length : 0);
                    } else {
                        console.warn('‚ö†Ô∏è ÂõûÊÜ∂ÈåÑË≥áÊñôÁµêÊßãÁï∞Â∏∏');
                    }
                    
                    console.log('‚úÖ Ëá™ÂãïËß£ÂØÜÊàêÂäü');
                    
                    // üö® Á´ãÂç≥ÂàùÂßãÂåñÊáâÁî®Á®ãÂºè
                    window.MemoirFlowUtils.initializeApp();
                    return true;
                    
                } catch (error) {
                    console.error('‚ùå Ëá™ÂãïËß£ÂØÜÂ§±Êïó:', error);
                    
                    try {
                        console.log('üîÑ ÂòóË©¶ÂÇôÁî®Ëß£Á¢ºÊñπÊ≥ï...');
                        const fallbackDecoded = atob(fallbackData);
                        const backupData = JSON.parse(fallbackDecoded);
                        
                        if (backupData && backupData.chineseName) {
                            console.log('‚úÖ ÂÇôÁî®ÊñπÊ≥ïÊàêÂäü');
                            globals.MEMOIR_DATA = backupData;
                            window.MemoirFlowUtils.initializeApp();
                            return true;
                        }
                    } catch (backupError) {
                        console.error('‚ùå ÂÇôÁî®ÊñπÊ≥ï‰πüÂ§±Êïó:', backupError);
                    }
                    
                    // Â¶ÇÊûúËá™ÂãïËß£ÂØÜÂ§±ÊïóÔºåÈ°ØÁ§∫ÂØÜÁ¢ºËº∏ÂÖ•
                    const passwordModal = document.getElementById('passwordModal');
                    if (passwordModal) {
                        passwordModal.classList.remove('hidden');
                        document.getElementById('memoirPassword').focus();
                    }
                    
                    return false;
                }
            };
            
            // üö® Á´ãÂç≥ÂòóË©¶Ëá™ÂãïËß£ÂØÜ
            console.log('üöÄ Á´ãÂç≥Âü∑Ë°åËá™ÂãïËß£ÂØÜ');
            setTimeout(function() {
                window.decryptMemoirData();
            }, 50);
            
                
                // Â∑•ÂÖ∑ÂáΩÂºè
                if (!window.MemoirFlowUtils) {
                    window.MemoirFlowUtils = {
                        initializeApp: function() {
                            console.log('üöÄ ÂàùÂßãÂåñÊáâÁî®Á®ãÂºè');
                            
                            const loadingScreen = document.getElementById('loadingScreen');
                            const passwordModal = document.getElementById('passwordModal');
                            const app = document.getElementById('app');
                            
                            if (loadingScreen) loadingScreen.classList.add('hidden');
                            if (passwordModal) passwordModal.classList.add('hidden');
                            if (app) app.classList.remove('hidden');
                            
                            if (typeof initApp === 'function') {
                                initApp();
                            }
                            
                            globals.isInitialized = true;
                            window.MEMOIR_DATA = globals.MEMOIR_DATA;
                        },
                        
                        showDecryptionError: function(message) {
                            console.error('‚ùå Ëß£ÂØÜÈåØË™§:', message);
                            const errorDiv = document.createElement('div');
                            errorDiv.className = 'decryption-error';
                            errorDiv.innerHTML = `
                                <div style="position: fixed; inset: 0; background: rgba(0,0,0,0.9); display: flex; align-items: center; justify-content: center; z-index: 10000;">
                                    <div style="background: white; padding: 40px; border-radius: 12px; text-align: center; max-width: 400px;">
                                        <div style="font-size: 48px; margin-bottom: 20px;">‚ùå</div>
                                        <h2 style="color: #e74c3c; margin-bottom: 15px;">Ëß£ÂØÜÂ§±Êïó</h2>
                                        <p style="color: #7f8c8d; margin-bottom: 20px;">${message}</p>
                                        <button onclick="location.reload()" style="background: #3498db; color: white; border: none; padding: 12px 24px; border-radius: 6px; cursor: pointer;">üîÑ ÈáçÊñ∞ËºâÂÖ•</button>
                                    </div>
                                </div>
                            `;
                            document.body.appendChild(errorDiv);
                        }
                    };
                }
                
                console.log('‚úÖ Ëß£ÂØÜËÖ≥Êú¨ËºâÂÖ•ÂÆåÊàê');
            })();
            </script>
            

    <script>
        // ÂµåÂÖ•ÂõûÊÜ∂ÈåÑÊï∏Êìö - Âä†ÂØÜÁâàÊú¨ÈúÄË¶ÅËß£ÂØÜÂæåÊâçËÉΩÂ≠òÂèñ
        const ENCRYPTED_MEMOIR_DATA = '{{ENCRYPTED_MEMOIR_DATA}}';
        const MEMOIR_PASSWORD_HASH = '{{MEMOIR_PASSWORD_HASH}}';
        
        // ÂÖ®ÂüüËÆäÊï∏
        let MEMOIR_DATA = null;
        let currentEventIndex = 0;
        let currentMediaIndex = 0;
        let showSubtitles = true;
        let showGrid = false;
        let typewriterEnabled = true;
        let isTransitioning = false;
        let typewriterTimer = null;
        let sortedEvents = [];
        
        // Ëß∏ÊéßÊªëÂãïÁõ∏ÈóúËÆäÊï∏
        let touchStartX = 0;
        let touchStartY = 0;
        let touchEndX = 0;
        let touchEndY = 0;
        let isSwiping = false;
        const minSwipeDistance = 50;

        // üö® ÂÖ®ÂüüËÆäÊï∏ÁÆ°ÁêÜ - ÈÄôÊòØÈóúÈçµÁº∫Â§±ÈÉ®ÂàÜ
        window.MemoirFlowGlobals = window.MemoirFlowGlobals || {
            MEMOIR_DATA: null,
            decryptionAttempts: 0,
            MAX_ATTEMPTS: 3,
            isInitialized: false,
            decryptionMode: null,
            debugInfo: {}
        };

        // Á¢∫‰øùÂÖ®ÂüüËÆäÊï∏ÂèØÁî®
        window.MEMOIR_DATA = null;

        // Á∞°ÂñÆÁöÑÂØÜÁ¢ºÈõúÊπäÂáΩÊï∏ÔºàÁîüÁî¢Áí∞Â¢ÉÊáâ‰ΩøÁî®Êõ¥ÂÆâÂÖ®ÁöÑÊñπÊ≥ïÔºâ
        function simpleHash(text) {
            let hash = 0;
            for (let i = 0; i < text.length; i++) {
                const char = text.charCodeAt(i);
                hash = ((hash << 5) - hash) + char;
                hash = hash & hash; // Convert to 32-bit integer
            }
            return hash.toString();
        }

        // Á∞°ÂñÆÁöÑÂä†ÂØÜ/Ëß£ÂØÜÂáΩÊï∏ÔºàÁ§∫‰æãÁî®ÔºåÁîüÁî¢Áí∞Â¢ÉÊáâ‰ΩøÁî®Êõ¥ÂÆâÂÖ®ÁöÑÊñπÊ≥ïÔºâ
        function simpleDecrypt(encryptedData, password) {
            try {
                // ÈÄôË£°Âè™ÊòØ‰∏ÄÂÄãÁ§∫‰æãÔºåÂØ¶ÈöõÊáâÁî®‰∏≠ÈúÄË¶Å‰ΩøÁî®ÁúüÊ≠£ÁöÑÂä†ÂØÜÁÆóÊ≥ï
                if (encryptedData.startsWith('ENCRYPTED:')) {
                    const data = encryptedData.replace('ENCRYPTED:', '');
                    return JSON.parse(atob(data));
                } else {
                    // Â¶ÇÊûúÊï∏ÊìöÊ≤íÊúâÂä†ÂØÜÊ®ôË®òÔºåÁõ¥Êé•Ëß£Êûê
                    return JSON.parse(encryptedData);
                }
            } catch (error) {
                console.error('Ëß£ÂØÜÂ§±Êïó:', error);
                return null;
            }
        }

        // Ëß∏ÊéßÊªëÂãïËôïÁêÜÂáΩÊï∏
        function handleTouchStart(e) {
            touchStartX = e.touches[0].clientX;
            touchStartY = e.touches[0].clientY;
            isSwiping = false;
        }

        function handleTouchMove(e) {
            if (!touchStartX || !touchStartY) return;
            
            touchEndX = e.touches[0].clientX;
            touchEndY = e.touches[0].clientY;
            
            const deltaX = touchEndX - touchStartX;
            const deltaY = touchEndY - touchStartY;
            
            if (Math.abs(deltaX) > Math.abs(deltaY) && Math.abs(deltaX) > 20) {
                e.preventDefault();
                isSwiping = true;
            }
        }

        function handleTouchEnd(e) {
            if (!isSwiping || !touchStartX || !touchEndX) {
                return;
            }
            
            const deltaX = touchEndX - touchStartX;
            const deltaY = touchEndY - touchStartY;
            
            if (Math.abs(deltaX) > Math.abs(deltaY) && Math.abs(deltaX) > minSwipeDistance) {
                if (deltaX > 0) {
                    goToEvent(currentEventIndex - 1);
                } else {
                    goToEvent(currentEventIndex + 1);
                }
            }
            
            touchStartX = 0;
            touchStartY = 0;
            touchEndX = 0;
            touchEndY = 0;
            isSwiping = false;
        }

        // ÂàùÂßãÂåñÊáâÁî®Á®ãÂºè
        function initApp() {
            console.log('üîí ÂàùÂßãÂåñÂä†ÂØÜÂõûÊÜ∂ÈåÑÊáâÁî®Á®ãÂºè');
            
            try {
                // üö® ‰øÆÊ≠£ÔºöÂæûÂÖ®ÂüüËÆäÊï∏ÊàñÊú¨Âú∞ËÆäÊï∏‰∏≠Áç≤ÂèñÊï∏Êìö
                const memoirData = window.MemoirFlowGlobals?.MEMOIR_DATA || window.MEMOIR_DATA || MEMOIR_DATA;
                
                if (!memoirData || !memoirData.events || memoirData.events.length === 0) {
                    throw new Error('Ê≤íÊúâÊâæÂà∞ÊúâÊïàÁöÑÂõûÊÜ∂ÈåÑÊï∏Êìö');
                }

                // üö® Á¢∫‰øùË®≠ÂÆöÂà∞ÂÖ®ÂüüËÆäÊï∏
                window.MemoirFlowGlobals.MEMOIR_DATA = memoirData;
                window.MEMOIR_DATA = memoirData;
                MEMOIR_DATA = memoirData;

                // ÊéíÂ∫è‰∫ã‰ª∂
                sortedEvents = memoirData.events.sort((a, b) => 
                    new Date(a.date).getTime() - new Date(b.date).getTime()
                );

                // ÂàùÂßãÂåñ UI ‰∫ã‰ª∂
                initEventListeners();
                
                // ËºâÂÖ•Á¨¨‰∏ÄÂÄã‰∫ã‰ª∂
                loadEvent(0);
                
                // ÂàùÂßãÂåñÊôÇÈñìËª∏
                initTimeline();
                
                // ÂàùÂßãÂåñËß∏ÊéßÊªëÂãï
                initTouchSwipe();

                console.log('‚úÖ Âä†ÂØÜÂõûÊÜ∂ÈåÑËºâÂÖ•ÂÆåÊàê');
            } catch (error) {
                console.error('‚ùå ÂàùÂßãÂåñÂ§±Êïó:', error);
                showError('ËºâÂÖ•Â§±Êïó', error.message);
            }
        }

        // ÂàùÂßãÂåñËß∏ÊéßÊªëÂãï
        function initTouchSwipe() {
            const swipeAreas = [
                document.getElementById('subtitleArea'),
                document.getElementById('mainContent'),
                document.getElementById('mediaArea')
            ];
            
            swipeAreas.forEach(area => {
                if (area) {
                    area.addEventListener('touchstart', handleTouchStart, { passive: false });
                    area.addEventListener('touchmove', handleTouchMove, { passive: false });
                    area.addEventListener('touchend', handleTouchEnd, { passive: false });
                }
            });
        }

        // ÂàùÂßãÂåñ‰∫ã‰ª∂Áõ£ËÅΩÂô®
        function initEventListeners() {
            // Â∞éËà™ÊåâÈàï
            document.getElementById('prevEventBtn').addEventListener('click', () => goToEvent(currentEventIndex - 1));
            document.getElementById('nextEventBtn').addEventListener('click', () => goToEvent(currentEventIndex + 1));
            
            // Â™íÈ´îÂ∞éËà™
            document.getElementById('prevMediaBtn').addEventListener('click', () => goToMedia(currentMediaIndex - 1));
            document.getElementById('nextMediaBtn').addEventListener('click', () => goToMedia(currentMediaIndex + 1));
            
            // Ë®≠ÂÆöÊåâÈàï
            document.getElementById('settingsBtn').addEventListener('click', toggleSettingsMenu);
            document.getElementById('subtitleToggle').addEventListener('click', toggleSubtitles);
            document.getElementById('gridToggle').addEventListener('click', toggleGridMode);
            document.getElementById('skipTypingBtn').addEventListener('click', skipTypewriter);
            
            // ÊôÇÈñìËª∏Â∞éËà™
            document.getElementById('timelineBtn').addEventListener('click', showTimeline);
            document.getElementById('timelineClose').addEventListener('click', hideTimeline);
            
            // ‰ΩøÁî®Ë™™Êòé
            document.getElementById('helpBtn').addEventListener('click', showHelp);
            document.getElementById('helpClose').addEventListener('click', hideHelp);
            
            // ÂÖ®Ëû¢ÂπïÊü•ÁúãÂô®
            document.getElementById('viewerClose').addEventListener('click', closeMediaViewer);
            document.getElementById('mediaViewer').addEventListener('click', (e) => {
                if (e.target === e.currentTarget) closeMediaViewer();
            });
            
            // ÈçµÁõ§ÊéßÂà∂
            document.addEventListener('keydown', handleKeyPress);
            
            // ÈªûÊìäÂ§ñÈÉ®ÈóúÈñâÈÅ∏ÂñÆ
            document.addEventListener('click', (e) => {
                const settingsMenu = document.getElementById('settingsMenu');
                const settingsBtn = document.getElementById('settingsBtn');
                if (!settingsMenu.contains(e.target) && !settingsBtn.contains(e.target)) {
                    settingsMenu.classList.add('hidden');
                }
            });
        }

        // ÂàùÂßãÂåñÊôÇÈñìËª∏
        function initTimeline() {
            const timelineList = document.getElementById('timelineList');
            timelineList.innerHTML = '';
            
            sortedEvents.forEach((event, index) => {
                const timelineItem = document.createElement('div');
                timelineItem.className = `timeline-item ${index === currentEventIndex ? 'active' : ''}`;
                timelineItem.addEventListener('click', () => {
                    goToEvent(index);
                    hideTimeline();
                });
                
                const eventDate = new Date(event.date).toLocaleDateString('zh-TW', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });
                
                timelineItem.innerHTML = `
                    <div class="timeline-item-date">${eventDate}</div>
                    <div class="timeline-item-title">${event.title}</div>
                    <div class="timeline-item-description">${event.description}</div>
                `;
                
                timelineList.appendChild(timelineItem);
            });
        }

        // ËºâÂÖ•‰∫ã‰ª∂
        function loadEvent(eventIndex) {
            if (eventIndex < 0 || eventIndex >= sortedEvents.length || isTransitioning) return;
            
            const event = sortedEvents[eventIndex];
            if (!event || !event.media || event.media.length === 0) return;
            
            isTransitioning = true;
            
            const mainContent = document.getElementById('mainContent');
            const subtitleArea = document.getElementById('subtitleArea');
            const mainMedia = document.getElementById('mainMedia');
            
            mainContent.classList.add('transitioning');
            subtitleArea.classList.add('fade-out');
            if (mainMedia) mainMedia.classList.add('transitioning');
            
            setTimeout(() => {
                currentEventIndex = eventIndex;
                currentMediaIndex = 0;
                
                updateEventInfo(event);
                updateNavigationButtons();
                updateTimelineActive();
                
                if (showGrid) {
                    loadGridMode(event.media);
                } else {
                    loadCarouselMode(event.media);
                }
                
                if (typewriterEnabled && showSubtitles) {
                    startTypewriter(event.description);
                }
                
                setTimeout(() => {
                    mainContent.classList.remove('transitioning');
                    subtitleArea.classList.remove('fade-out');
                    subtitleArea.classList.add('fade-in');
                    if (mainMedia) mainMedia.classList.remove('transitioning');
                    
                    setTimeout(() => {
                        subtitleArea.classList.remove('fade-in');
                        isTransitioning = false;
                    }, 500);
                }, 100);
            }, 250);
        }

        // Êõ¥Êñ∞‰∫ã‰ª∂Ë≥áË®ä
        function updateEventInfo(event) {
            document.getElementById('currentEventNum').textContent = currentEventIndex + 1;
            document.getElementById('totalEvents').textContent = sortedEvents.length;
            document.getElementById('mediaCount').textContent = event.media.length;
            
            const eventDate = new Date(event.date).toLocaleDateString('zh-TW', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            
            document.getElementById('eventDate').textContent = eventDate;
            document.getElementById('eventTitle').textContent = event.title;
            
            if (!typewriterEnabled || !showSubtitles) {
                document.getElementById('eventDescription').textContent = event.description;
            }
        }

        // Êõ¥Êñ∞Â∞éËà™ÊåâÈàïÁãÄÊÖã
        function updateNavigationButtons() {
            const prevEventBtn = document.getElementById('prevEventBtn');
            const nextEventBtn = document.getElementById('nextEventBtn');
            
            if (currentEventIndex === 0) {
                prevEventBtn.classList.add('disabled');
            } else {
                prevEventBtn.classList.remove('disabled');
            }
            
            if (currentEventIndex === sortedEvents.length - 1) {
                nextEventBtn.classList.add('disabled');
            } else {
                nextEventBtn.classList.remove('disabled');
            }
        }

        // Êõ¥Êñ∞ÊôÇÈñìËª∏ÊøÄÊ¥ªÁãÄÊÖã
        function updateTimelineActive() {
            const timelineItems = document.querySelectorAll('.timeline-item');
            timelineItems.forEach((item, index) => {
                if (index === currentEventIndex) {
                    item.classList.add('active');
                } else {
                    item.classList.remove('active');
                }
            });
        }

        // ËºâÂÖ•Ëº™Êí≠Ê®°Âºè
        function loadCarouselMode(media) {
            const mediaDisplay = document.getElementById('mediaDisplay');
            const thumbnailScroll = document.getElementById('thumbnailScroll');
            
            mediaDisplay.innerHTML = '';
            thumbnailScroll.innerHTML = '';
            
            if (media.length > 3) {
                thumbnailScroll.classList.add('many-items');
            } else {
                thumbnailScroll.classList.remove('many-items');
            }
            
            loadMediaIntoElement(media[currentMediaIndex], mediaDisplay, true);
            
            media.forEach((item, index) => {
                const thumbnail = createThumbnailElement(item, index);
                thumbnailScroll.appendChild(thumbnail);
            });
            
            updateMediaNavigation(media);
            updateMediaCounter();
        }

        // ËºâÂÖ•Á∂≤Ê†ºÊ®°Âºè
        function loadGridMode(media) {
            const gridContainer = document.getElementById('gridContainer');
            gridContainer.innerHTML = '';
            
            media.forEach((item, index) => {
                const gridItem = createGridItemElement(item, index);
                gridContainer.appendChild(gridItem);
            });
        }

        // ÂâµÂª∫Â™íÈ´îÂÖÉÁ¥†
        function loadMediaIntoElement(mediaItem, container, isMainDisplay = false) {
            container.innerHTML = '';
            
            if (mediaItem.type === 'image') {
                const img = document.createElement('img');
                img.src = mediaItem.isUrl ? mediaItem.url : `media/${getMediaFileName(mediaItem)}`;
                img.alt = mediaItem.originalName;
                img.style.cursor = 'pointer';
                
                img.onerror = function() {
                    container.innerHTML = `
                        <div style="display: flex; align-items: center; justify-content: center; height: 100%; background: #f0f0f0; color: #666;">
                            ‚ùå ÂúñÁâáËºâÂÖ•Â§±Êïó
                        </div>
                    `;
                };
                
                if (isMainDisplay) {
                    img.addEventListener('click', () => openMediaViewer(mediaItem));
                }
                
                container.appendChild(img);
            } else if (mediaItem.type === 'video') {
                if (mediaItem.isUrl && (mediaItem.url.includes('youtube.com') || mediaItem.url.includes('youtu.be'))) {
                    const videoId = extractYouTubeId(mediaItem.url);
                    if (videoId) {
                        const iframe = document.createElement('iframe');
                        iframe.src = `https://www.youtube-nocookie.com/embed/${videoId}?enablejsapi=1&rel=0&modestbranding=1`;
                        iframe.style.width = '100%';
                        iframe.style.height = '100%';
                        iframe.style.border = 'none';
                        iframe.allowFullscreen = true;
                        iframe.allow = 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture';
                        iframe.title = mediaItem.originalName;
                        
                        iframe.onerror = function() {
                            container.innerHTML = `
                                <div style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; background: #1a1a2e; color: white; text-align: center;">
                                    <div style="font-size: 48px; margin-bottom: 20px;">üì∫</div>
                                    <div style="margin-bottom: 10px; font-size: 16px; font-weight: bold;">YouTube ÂΩ±Áâá</div>
                                    <div style="margin-bottom: 15px; font-size: 14px; opacity: 0.8;">${mediaItem.originalName}</div>
                                    <a href="${mediaItem.url}" target="_blank" rel="noopener noreferrer" 
                                    style="padding: 10px 20px; background: #e74c3c; color: white; text-decoration: none; border-radius: 5px; font-size: 14px;">
                                        üöÄ Âú®Êñ∞Ë¶ñÁ™óËßÄÁúã
                                    </a>
                                </div>
                            `;
                        };
                        
                        container.appendChild(iframe);
                    } else {
                        container.innerHTML = `
                            <div style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; background: #1a1a2e; color: white; text-align: center;">
                                <div style="font-size: 48px; margin-bottom: 20px;">‚ùå</div>
                                <div style="margin-bottom: 10px; font-size: 16px;">ÁÑ°ÊïàÁöÑ YouTube ÈÄ£Áµê</div>
                                <a href="${mediaItem.url}" target="_blank" rel="noopener noreferrer" 
                                style="padding: 10px 20px; background: #3498db; color: white; text-decoration: none; border-radius: 5px; font-size: 14px;">
                                    üîó Êü•ÁúãÂéüÈÄ£Áµê
                                </a>
                            </div>
                        `;
                    }
                } else {
                    const video = document.createElement('video');
                    video.src = mediaItem.isUrl ? mediaItem.url : `media/${getMediaFileName(mediaItem)}`;
                    video.controls = true;
                    video.muted = true;
                    video.playsInline = true;
                    video.style.cursor = 'pointer';
                    
                    video.onerror = function() {
                        container.innerHTML = `
                            <div style="display: flex; align-items: center; justify-content: center; height: 100%; background: #f0f0f0; color: #666;">
                                ‚ùå ÂΩ±ÁâáËºâÂÖ•Â§±Êïó
                            </div>
                        `;
                    };
                    
                    if (isMainDisplay) {
                        video.addEventListener('click', () => openMediaViewer(mediaItem));
                    }
                    
                    container.appendChild(video);
                }
            }
        }

        // ÂâµÂª∫Á∏ÆÂúñÂÖÉÁ¥†
        function createThumbnailElement(mediaItem, index) {
            const thumbnail = document.createElement('div');
            thumbnail.className = `thumbnail ${index === currentMediaIndex ? 'active' : ''}`;
            thumbnail.addEventListener('click', () => goToMedia(index));
            
            loadMediaIntoElement(mediaItem, thumbnail, false);
            
            const indexLabel = document.createElement('div');
            indexLabel.className = 'thumbnail-index';
            indexLabel.textContent = index + 1;
            thumbnail.appendChild(indexLabel);
            
            return thumbnail;
        }

        // ÂâµÂª∫Á∂≤Ê†ºÈ†ÖÁõÆÂÖÉÁ¥†
        function createGridItemElement(mediaItem, index) {
            const gridItem = document.createElement('div');
            gridItem.className = `grid-item ${index === currentMediaIndex ? 'active' : ''}`;
            gridItem.addEventListener('click', () => goToMedia(index));
            gridItem.addEventListener('dblclick', () => openMediaViewer(mediaItem));
            
            loadMediaIntoElement(mediaItem, gridItem, false);
            
            const info = document.createElement('div');
            info.className = 'grid-item-info';
            
            const name = document.createElement('div');
            name.className = 'grid-item-name';
            name.textContent = mediaItem.originalName;
            info.appendChild(name);
            
            gridItem.appendChild(info);
            
            return gridItem;
        }

        // Êõ¥Êñ∞Â™íÈ´îÂ∞éËà™
        function updateMediaNavigation(media) {
            const prevBtn = document.getElementById('prevMediaBtn');
            const nextBtn = document.getElementById('nextMediaBtn');
            
            if (currentMediaIndex === 0) {
                prevBtn.classList.add('disabled');
            } else {
                prevBtn.classList.remove('disabled');
            }
            
            if (currentMediaIndex === media.length - 1) {
                nextBtn.classList.add('disabled');
            } else {
                nextBtn.classList.remove('disabled');
            }
        }

        // Êõ¥Êñ∞Â™íÈ´îË®àÊï∏Âô®
        function updateMediaCounter() {
            const counter = document.getElementById('mediaCounterDisplay');
            const currentEvent = sortedEvents[currentEventIndex];
            counter.textContent = `${currentMediaIndex + 1} / ${currentEvent.media.length}`;
        }

        // ÂàáÊèõÂà∞ÊåáÂÆö‰∫ã‰ª∂
        function goToEvent(eventIndex) {
            if (eventIndex >= 0 && eventIndex < sortedEvents.length && eventIndex !== currentEventIndex && !isTransitioning) {
                loadEvent(eventIndex);
            }
        }

        // ÂàáÊèõÂà∞ÊåáÂÆöÂ™íÈ´î
        function goToMedia(mediaIndex) {
            const currentEvent = sortedEvents[currentEventIndex];
            if (mediaIndex >= 0 && mediaIndex < currentEvent.media.length && mediaIndex !== currentMediaIndex) {
                currentMediaIndex = mediaIndex;
                
                if (showGrid) {
                    updateGridSelection();
                } else {
                    const mediaDisplay = document.getElementById('mediaDisplay');
                    loadMediaIntoElement(currentEvent.media[currentMediaIndex], mediaDisplay, true);
                    updateThumbnailSelection();
                    updateMediaNavigation(currentEvent.media);
                    updateMediaCounter();
                }
            }
        }

        // Êõ¥Êñ∞Á∏ÆÂúñÈÅ∏ÊìáÁãÄÊÖã
        function updateThumbnailSelection() {
            const thumbnails = document.querySelectorAll('.thumbnail');
            thumbnails.forEach((thumb, index) => {
                if (index === currentMediaIndex) {
                    thumb.classList.add('active');
                } else {
                    thumb.classList.remove('active');
                }
            });
        }

        // Êõ¥Êñ∞Á∂≤Ê†ºÈÅ∏ÊìáÁãÄÊÖã
        function updateGridSelection() {
            const gridItems = document.querySelectorAll('.grid-item');
            gridItems.forEach((item, index) => {
                if (index === currentMediaIndex) {
                    item.classList.add('active');
                } else {
                    item.classList.remove('active');
                }
            });
        }

        // ÂàáÊèõË®≠ÂÆöÈÅ∏ÂñÆ
        function toggleSettingsMenu() {
            const menu = document.getElementById('settingsMenu');
            menu.classList.toggle('hidden');
        }

        // ÂàáÊèõÂ≠óÂπïÈ°ØÁ§∫
        function toggleSubtitles() {
            showSubtitles = !showSubtitles;
            const toggle = document.getElementById('subtitleToggle');
            const eventDescription = document.getElementById('eventDescription');
            
            if (showSubtitles) {
                toggle.classList.add('active');
                eventDescription.style.display = 'block';
                
                if (typewriterEnabled) {
                    const currentEvent = sortedEvents[currentEventIndex];
                    startTypewriter(currentEvent.description);
                }
            } else {
                toggle.classList.remove('active');
                eventDescription.style.display = 'none';
            }
        }

        // ÂàáÊèõÁ∂≤Ê†ºÊ®°Âºè
        function toggleGridMode() {
            showGrid = !showGrid;
            const toggle = document.getElementById('gridToggle');
            const carousel = document.getElementById('mediaCarousel');
            const grid = document.getElementById('mediaGrid');
            const mainContent = document.getElementById('mainContent');
            const subtitleArea = document.getElementById('subtitleArea');
            
            if (showGrid) {
                toggle.classList.add('active');
                carousel.classList.add('hidden');
                grid.classList.remove('hidden');
                mainContent.classList.add('grid-mode');
                subtitleArea.style.display = 'none';
                
                const currentEvent = sortedEvents[currentEventIndex];
                loadGridMode(currentEvent.media);
            } else {
                toggle.classList.remove('active');
                carousel.classList.remove('hidden');
                grid.classList.add('hidden');
                mainContent.classList.remove('grid-mode');
                subtitleArea.style.display = 'block';
                
                const currentEvent = sortedEvents[currentEventIndex];
                loadCarouselMode(currentEvent.media);
            }
        }

        // È°ØÁ§∫ÊôÇÈñìËª∏
        function showTimeline() {
            const timelinePanel = document.getElementById('timelinePanel');
            timelinePanel.classList.remove('hidden');
            
            setTimeout(() => {
                const timelineContent = timelinePanel.querySelector('.timeline-content');
                timelineContent.classList.add('fade-in');
            }, 10);
        }

        // Èö±ËóèÊôÇÈñìËª∏
        function hideTimeline() {
            const timelinePanel = document.getElementById('timelinePanel');
            const timelineContent = timelinePanel.querySelector('.timeline-content');
            
            timelineContent.classList.remove('fade-in');
            timelineContent.classList.add('fade-out');
            
            setTimeout(() => {
                timelinePanel.classList.add('hidden');
                timelineContent.classList.remove('fade-out');
            }, 300);
        }

        // È°ØÁ§∫‰ΩøÁî®Ë™™Êòé
        function showHelp() {
            document.getElementById('helpPanel').classList.remove('hidden');
        }

        // Èö±Ëóè‰ΩøÁî®Ë™™Êòé
        function hideHelp() {
            document.getElementById('helpPanel').classList.add('hidden');
        }

        // ÊâìÂ≠óÊ©üÊïàÊûú
        function startTypewriter(text) {
            const element = document.getElementById('eventDescription');
            element.innerHTML = '';
            
            clearTimeout(typewriterTimer);
            
            let index = 0;
            const speed = 50;
            
            function typeChar() {
                if (index < text.length) {
                    element.textContent += text.charAt(index);
                    index++;
                    typewriterTimer = setTimeout(typeChar, speed);
                } else {
                    document.getElementById('skipTypingBtn').classList.add('hidden');
                }
            }
            
            document.getElementById('skipTypingBtn').classList.remove('hidden');
            typeChar();
        }

        // Ë∑≥ÈÅéÊâìÂ≠óÊ©üÊïàÊûú
        function skipTypewriter() {
            clearTimeout(typewriterTimer);
            const currentEvent = sortedEvents[currentEventIndex];
            document.getElementById('eventDescription').textContent = currentEvent.description;
            document.getElementById('skipTypingBtn').classList.add('hidden');
        }

        // ÈñãÂïüÂÖ®Ëû¢ÂπïÂ™íÈ´îÊü•ÁúãÂô®
        function openMediaViewer(mediaItem) {
            const viewer = document.getElementById('mediaViewer');
            const content = document.getElementById('viewerContent');
            
            loadMediaIntoElement(mediaItem, content, false);
            viewer.classList.remove('hidden');
        }

        // ÈóúÈñâÂÖ®Ëû¢ÂπïÂ™íÈ´îÊü•ÁúãÂô®
        function closeMediaViewer() {
            document.getElementById('mediaViewer').classList.add('hidden');
        }

        // ÈçµÁõ§‰∫ã‰ª∂ËôïÁêÜ
        function handleKeyPress(e) {
            const viewer = document.getElementById('mediaViewer');
            const timelinePanel = document.getElementById('timelinePanel');
            const helpPanel = document.getElementById('helpPanel');
            const settingsMenu = document.getElementById('settingsMenu');
            
            if (!viewer.classList.contains('hidden') || 
                !timelinePanel.classList.contains('hidden') || 
                !helpPanel.classList.contains('hidden') ||
                !settingsMenu.classList.contains('hidden')) {
                if (e.key === 'Escape') {
                    closeMediaViewer();
                    hideTimeline();
                    hideHelp();
                    settingsMenu.classList.add('hidden');
                }
                return;
            }
            
            if (isTransitioning) return;
            
            switch (e.key) {
                case 'ArrowLeft':
                    e.preventDefault();
                    goToEvent(currentEventIndex - 1);
                    break;
                case 'ArrowRight':
                    e.preventDefault();
                    goToEvent(currentEventIndex + 1);
                    break;
                case 'g':
                case 'G':
                    e.preventDefault();
                    toggleGridMode();
                    break;
                case 'Escape':
                    e.preventDefault();
                    if (showGrid) {
                        toggleGridMode();
                    }
                    break;
            }
        }

        // ËºîÂä©ÂáΩÊï∏
        function getMediaFileName(mediaItem) {
            const currentEvent = sortedEvents[currentEventIndex];
            const extension = mediaItem.path.split('.').pop();
            return `${currentEvent.id}_${mediaItem.id}.${extension}`;
        }

        function extractYouTubeId(url) {
            const patterns = [
                /(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/,
                /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/
            ];
            
            for (const pattern of patterns) {
                const match = url.match(pattern);
                if (match && match[2] && match[2].length === 11) {
                    return match[2];
                }
            }
            
            return null;
        }

        function showError(title, message) {
            alert(`${title}: ${message}`);
        }

        // üö® Â∑•ÂÖ∑ÂáΩÊï∏
        window.MemoirFlowUtils = {
            initializeApp: function() {
                console.log('üöÄ ÂàùÂßãÂåñÊáâÁî®Á®ãÂºè');
                
                const loadingScreen = document.getElementById('loadingScreen');
                const passwordModal = document.getElementById('passwordModal');
                const app = document.getElementById('app');
                
                if (loadingScreen) loadingScreen.classList.add('hidden');
                if (passwordModal) passwordModal.classList.add('hidden');
                if (app) app.classList.remove('hidden');
                
                // ËºâÂÖ•ÂõûÊÜ∂ÈåÑÂÖßÂÆπ
                if (window.MemoirFlowGlobals.MEMOIR_DATA) {
                    loadMemoirContent(window.MemoirFlowGlobals.MEMOIR_DATA);
                }
                
                window.MemoirFlowGlobals.isInitialized = true;
                window.MEMOIR_DATA = window.MemoirFlowGlobals.MEMOIR_DATA;
            },
            
            showDecryptionError: function(message) {
                const errorDiv = document.createElement('div');
                errorDiv.className = 'decryption-error';
                errorDiv.innerHTML = `
                    <div class="error-icon">‚ùå</div>
                    <h1 class="error-title">Ëß£ÂØÜÂ§±Êïó</h1>
                    <p class="error-description">${message}</p>
                    <button class="retry-btn" onclick="location.reload()">üîÑ ÈáçÊñ∞ËºâÂÖ•</button>
                `;
                document.body.appendChild(errorDiv);
            },

            extractMemoirIdFromUrl: function() {
                // Âæû URL ÊàñÂÖ∂‰ªñÂú∞ÊñπÊèêÂèñÂõûÊÜ∂ÈåÑ ID
                return window.location.pathname.split('/').pop() || 'default';
            }
        };

        // ËºâÂÖ•ÂõûÊÜ∂ÈåÑÂÖßÂÆπÁöÑÂáΩÊï∏
        function loadMemoirContent(memoirData) {
            console.log('üìö ËºâÂÖ•ÂõûÊÜ∂ÈåÑÂÖßÂÆπ:', memoirData);
            
            // Êõ¥Êñ∞Áµ±Ë®àË≥áË®ä
            const statsContainer = document.getElementById('memoir-stats');
            if (statsContainer && memoirData.events) {
                const eventCount = memoirData.events.length;
                const mediaCount = memoirData.events.reduce((total, event) => 
                    total + (event.media ? event.media.length : 0), 0);
                
                statsContainer.innerHTML = `
                    <p>üìÖ ÊôÇÈñìÁØÄÈªûÔºö${eventCount} ÂÄã</p>
                    <p>üé¨ Â™íÈ´îÊñá‰ª∂Ôºö${mediaCount} ÂÄã</p>
                    <p>üìù ÂâµÂª∫ÊôÇÈñìÔºö${new Date(memoirData.createdAt || memoirData.created_at).toLocaleDateString('zh-TW')}</p>
                `;
            }

            // ËºâÂÖ•ÊôÇÈñìËª∏
            const timelineContainer = document.getElementById('timelineContainer');
            if (timelineContainer && memoirData.events) {
                timelineContainer.innerHTML = '';
                
                // ÊåâÊó•ÊúüÊéíÂ∫è‰∫ã‰ª∂
                const sortedEvents = memoirData.events.sort((a, b) => 
                    new Date(a.date) - new Date(b.date));
                
                sortedEvents.forEach(event => {
                    const timelineItem = document.createElement('div');
                    timelineItem.className = 'timeline-item';
                    
                    const eventDate = new Date(event.date).toLocaleDateString('zh-TW', {
                        year: 'numeric',
                        month: 'long',
                        day: 'numeric'
                    });
                    
                    timelineItem.innerHTML = `
                        <div class="timeline-date">${eventDate}</div>
                        <div class="timeline-title">${event.title}</div>
                        <div class="timeline-description">${event.description}</div>
                    `;
                    
                    timelineContainer.appendChild(timelineItem);
                });
            }
        }

        // ÂØÜÁ¢ºÈ©óË≠âÂíåÊáâÁî®Á®ãÂºèÂàùÂßãÂåñ
        document.addEventListener('DOMContentLoaded', function() {
            // ÂàùÂßãÂåñ Lucide ÂúñÊ®ô
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }

            // È°ØÁ§∫ËºâÂÖ•Áï´Èù¢
            setTimeout(() => {
                const loadingScreen = document.getElementById('loadingScreen');
                const passwordModal = document.getElementById('passwordModal');
                
                loadingScreen.classList.add('hidden');
                
                // üö® Ê™¢Êü•ÂÖ®ÂüüËÆäÊï∏ÊòØÂê¶Â∑≤Á∂ìË®≠ÂÆöËß£ÂØÜÊ®°Âºè
                const globals = window.MemoirFlowGlobals || {};
                
                console.log('üîç Ê™¢Êü•Ëß£ÂØÜÊ®°Âºè:', globals.decryptionMode);
                
                // Â¶ÇÊûúÊòØËá™ÂãïËß£ÂØÜÊ®°ÂºèÔºàÂõûÈÄÄÊ®°ÂºèÔºâÔºåÁõ¥Êé•Ë∑≥ÈÅéÂØÜÁ¢ºËº∏ÂÖ•
                if (globals.decryptionMode === 'auto_fallback' || 
                    globals.decryptionMode === 'backend' ||
                    globals.decryptionMode === 'fallback') {
                    
                    console.log('üîÑ Ê™¢Ê∏¨Âà∞Ëá™ÂãïËß£ÂØÜÊ®°ÂºèÔºåË∑≥ÈÅéÂØÜÁ¢ºËº∏ÂÖ•');
                    
                    // Áõ¥Êé•ÂòóË©¶Ëß£ÂØÜ
                    if (typeof window.decryptMemoirData === 'function') {
                        window.decryptMemoirData().catch(function(error) {
                            console.error('‚ùå Ëá™ÂãïËß£ÂØÜÂ§±ÊïóÔºåÈ°ØÁ§∫ÂØÜÁ¢ºËº∏ÂÖ•:', error);
                            passwordModal.classList.remove('hidden');
                            document.getElementById('memoirPassword').focus();
                        });
                    } else {
                        console.error('‚ùå Ëß£ÂØÜÂáΩÊï∏Êú™ÊâæÂà∞ÔºåÈ°ØÁ§∫ÂØÜÁ¢ºËº∏ÂÖ•');
                        passwordModal.classList.remove('hidden');
                        document.getElementById('memoirPassword').focus();
                    }
                } else {
                    // ÂØÜÁ¢º‰øùË≠∑Ê®°ÂºèÔºåÈ°ØÁ§∫ÂØÜÁ¢ºËº∏ÂÖ•Ê°Ü
                    console.log('üîë Ê™¢Ê∏¨Âà∞ÂØÜÁ¢º‰øùË≠∑Ê®°ÂºèÔºåÈ°ØÁ§∫ÂØÜÁ¢ºËº∏ÂÖ•');
                    passwordModal.classList.remove('hidden');
                    document.getElementById('memoirPassword').focus();
                }
            }, 1000); // Á∏ÆÁü≠Á≠âÂæÖÊôÇÈñì

            // ÂØÜÁ¢ºËß£ÈéñÈÇèËºØ
            document.getElementById('unlockBtn').addEventListener('click', function() {
                const password = document.getElementById('memoirPassword').value;
                
                // Â¶ÇÊûúÊúâËß£ÂØÜÂáΩÊï∏Ôºå‰ΩøÁî®Ëß£ÂØÜÂáΩÊï∏
                if (typeof window.decryptMemoirData === 'function') {
                    window.decryptMemoirData(password);
                } else {
                    // ÂõûÈÄÄÂà∞Á∞°ÂñÆËß£ÂØÜÈÇèËºØ
                    const passwordHash = simpleHash(password);
                    
                    if (MEMOIR_PASSWORD_HASH && passwordHash.toString() === MEMOIR_PASSWORD_HASH) {
                        MEMOIR_DATA = simpleDecrypt(ENCRYPTED_MEMOIR_DATA, password);
                        
                        if (MEMOIR_DATA) {
                            // Ë®≠ÂÆöÂà∞ÂÖ®ÂüüËÆäÊï∏
                            window.MemoirFlowGlobals.MEMOIR_DATA = MEMOIR_DATA;
                            window.MEMOIR_DATA = MEMOIR_DATA;
                            
                            document.getElementById('passwordModal').classList.add('hidden');
                            document.getElementById('app').classList.remove('hidden');
                            initApp();
                        } else {
                            showPasswordError('Ëß£ÂØÜÂ§±ÊïóÔºåË´ãÊ™¢Êü•ÂØÜÁ¢º');
                        }
                    } else {
                        showPasswordError('ÂØÜÁ¢ºÈåØË™§ÔºåË´ãÈáçË©¶');
                    }
                }
            });

            // ÂØÜÁ¢ºËº∏ÂÖ•‰∫ã‰ª∂
            document.getElementById('memoirPassword').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    document.getElementById('unlockBtn').click();
                }
            });

            // ÂèñÊ∂àÊåâÈàï
            document.getElementById('cancelBtn').addEventListener('click', function() {
                if (window.history.length > 1) {
                    window.history.back();
                } else {
                    window.close();
                }
            });

            function showPasswordError(message) {
                const errorDiv = document.getElementById('passwordError');
                errorDiv.textContent = message;
                errorDiv.classList.remove('hidden');
                document.getElementById('memoirPassword').value = '';
                
                // 3ÁßíÂæåËá™ÂãïÈö±ËóèÈåØË™§Ë®äÊÅØ
                setTimeout(() => {
                    errorDiv.classList.add('hidden');
                }, 3000);
            }

            // ÂØÜÁ¢ºÊèêÁ§∫ÂáΩÊï∏
            function showPasswordPrompt(errorMessage = '') {
                const modal = document.getElementById('passwordModal');
                const loadingScreen = document.getElementById('loadingScreen');
                const errorDiv = document.getElementById('passwordError');
                
                loadingScreen.classList.add('hidden');
                modal.classList.remove('hidden');
                
                if (errorMessage) {
                    showPasswordError(errorMessage);
                }
                
                document.getElementById('memoirPassword').focus();
            }
        });

        // ÂàùÂßãÂåñ Lucide ÂúñÊ®ô
        lucide.createIcons();

        // Á≠âÂæÖ DOM ËºâÂÖ•ÂæåÂàùÂßãÂåñ
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', function() {
                lucide.createIcons();
            });
        } else {
            lucide.createIcons();
        }
        console.log('üîê MemoirFlow Âä†ÂØÜÂõûÊÜ∂ÈåÑÊ®°ÊùøÂ∑≤ËºâÂÖ•');
        console.log('üìã Á≠âÂæÖËß£ÂØÜËÖ≥Êú¨Ê≥®ÂÖ•...');
    </script>

    <!-- ÁâàÊ¨äËÅ≤Êòé -->
    <script>
        console.log('%cüîí MemoirFlow Âä†ÂØÜÂõûÊÜ∂ÈåÑÁ≥ªÁµ±', 'color: #3b82f6; font-size: 14px; font-weight: bold;');
        console.log('%cüõ°Ô∏è ÁâàÊ¨äÊâÄÊúâ ¬© MemoirFlow - Êú™Á∂ìÊéàÊ¨äÁ¶ÅÊ≠¢Â≠òÂèñ', 'color: #6b7280; font-size: 10px;');
        console.log('%c‚ö†Ô∏è Ê≠§ÂÖßÂÆπÂèóÂØÜÁ¢º‰øùË≠∑ÔºåË´ãÂãøÂòóË©¶Á†¥Ëß£', 'color: #ef4444; font-size: 10px;');
    </script>
</body>
</html>